!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Formio")):"function"==typeof define&&define.amd?define(["Formio"],e):"object"==typeof exports?exports.premium=e(require("Formio")):t.premium=e(t.Formio)}(self,(function(t){return(()=>{var e={131:(t,e)=>{e.Z=function(t){return'<div class="row">\n  <div class="col-sm-2">\n    Users\n  </div>\n</div>'}},213:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="list-group-item">\n  <div class="list-group-subheader">\n    <div class="row">\n      <div class="col-sm-2">\n        User '+(null==(e=rowIndex+1)?"":e)+"\n      </div>\n      ",t.self.options.readOnly||(i+='\n      <div class="col-sm-2">\n        <div class="btn-group pull-right">\n          <button class="btn btn-default btn-light btn-sm editCard"><i class="'+(null==(e=t.iconClass("edit"))?"":e)+'"></i></button>\n          <button class="btn btn-danger btn-sm removeCard"><i class="'+(null==(e=t.iconClass("trash"))?"":e)+'"></i></button>\n        </div>\n      </div>\n      '),i+="\n    </div>\n  </div>\n  ",t.util.eachComponent(t.components,(function(n){i+="\n  ",n.hasOwnProperty("tableView")&&!n.tableView||(i+='\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=n.key)?"":e)+'\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=t.getView(n,t.row[n.key]))?"":e)+"\n    </div>\n  </div>\n  "),i+="\n  "})),i+="\n</div>"}},289:(t,e,i)=>{"use strict";i.d(e,{default:()=>Dn});var n=i(98);const r=[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field.",validate:{required:!0}},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0}],s=[{type:"select",input:!0,weight:0,tooltip:"The source to get the data. You can fetch from a URL or use javascript to get the value.",key:"dataSrc",defaultValue:"url",label:"Data Source Type",dataSrc:"values",data:{values:[{label:"URL",value:"url"},{label:"IndexedDB",value:"indexeddb"}]}},{type:"checkbox",input:!0,weight:9,key:"indexeddb.fromExisting",label:"Choose from existing databases?",defaultValue:!1,tooltip:"Check it if you want to select an existing database.",conditional:{json:{in:[{var:"data.dataSrc"},["indexeddb"]]}}},{type:"textfield",weight:10,input:!0,key:"indexeddb.database",label:"Database name",forceOverride:!0,tooltip:"The name of the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"textfield",input:!0,key:"indexeddb.table",label:"Table name",forceOverride:!0,weight:16,tooltip:"The name of table in the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"select",input:!0,key:"indexeddb.database",label:"Existing Database name",weight:10,tooltip:"The name of the existing indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){return window.indexedDB?window.indexedDB.databases().then((function(t){return t.map((function(t){var e=t.name;return{value:e,label:e}}))})):(window.alert("Your browser doesn't support current version of indexedDB"),[])}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"select",input:!0,key:"indexeddb.table",label:"Existing Table name",refreshOn:"indexeddb.database",clearOnRefresh:!0,weight:16,tooltip:"The name of an existing table in the indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){if(!window.indexedDB)return window.alert("Your browser doesn't support current version of indexedDB"),[];var e=t.data.indexeddb.database;return e?new Promise((function(t){var i=window.indexedDB.open(e);i.onsuccess=function(e){var i=e.target.result.objectStoreNames;if(i.length){var n=Array.from(i).map((function(t){return{value:t,label:t}}));t(n)}else t([])},i.onerror=function(){return t([])}})):[]}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"textfield",input:!0,key:"fetch.url",weight:10,label:"Data Source URL",placeholder:"Data Source URL",tooltip:"A URL that returns data. You can interpolate form data using curly bracket notation.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"select",input:!0,label:"Method",key:"fetch.method",clearOnHide:!0,tooltip:"The HTTP Request method to use when making the request.",defaultValue:"get",weight:11,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Get",value:"get"},{label:"Put",value:"put"},{label:"Post",value:"post"},{label:"Patch",value:"patch"},{label:"Delete",value:"delete"}]},conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"datagrid",input:!0,label:"Request Headers",key:"fetch.headers",tooltip:"Set any headers that should be sent along with the request to the url. This is useful for authentication.",weight:12,components:[{label:"Key",key:"key",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}],clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,key:"fetch.forwardHeaders",label:"Forward Headers",tooltip:"Check this if you would like to forward the headers passed to the server to the fetch endpoint.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,weight:26,key:"fetch.authenticate",label:"Form.io Authentication",tooltip:"Check this if you would like to pass Form.io Authentication headers with the request.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"panel",title:"POST Body Specification",theme:"default",collapsible:!0,collapsed:!0,key:"specifyPostBodyPanel",weight:1e3,tooltip:"Write custom code to specify POST Body.",conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"url"]},{"===":[{var:"data.fetch.method"},"post"]}]}},components:[{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped"><tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'},{type:"textarea",key:"fetch.specifyPostBody",rows:5,editor:"ace",hideLabel:!0,input:!0,placeholder:"body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n}"},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p><p><h4>Example:</h4><pre>body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n};</pre></p>"}]},{type:"checkbox",input:!0,weight:1001,key:"allowCaching",label:"Enable to Store Request Result in the Cache",defaultValue:!0,tooltip:"When checked, the requests and its results will be stored in the cache and if the Select will try to make the request to the same URL with the same paremetrs, the cached data will be returned. It allows to increase performance, but if the remote source's data is changing quite often and you always need to keep it up-to-date, uncheck this option.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}}],o=[{type:"checkbox",input:!0,key:"trigger.init",label:"Trigger on form init",tooltip:"When enabled the request will be made when the form is initialized.",weight:15},{type:"checkbox",input:!0,key:"trigger.server",label:"Trigger on server",tooltip:"When enabled the request will be made on the server during validation.",description:"Async requests on the server can slow down processing since the server must wait for a response before proceeding. Do not add too many server side requests or performance will suffer.",weight:15},{type:"select",input:!0,key:"refreshOn",label:"Trigger on Data change",weight:10,tooltip:"Refresh data when another field changes.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(i,n){i.key!==t.data.key&&e.push({label:i.label||i.key,value:n})})),e}}},{type:"select",input:!0,key:"refreshOnBlur",label:"Trigger on blur of Component",weight:10,tooltip:"Refresh data when another field was blured.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(i,n){i.key!==t.data.key&&e.push({label:i.label||i.key,value:n})})),e}}},{type:"textfield",label:"Trigger on Event",key:"refreshOnEvent",input:!0,weight:110,tooltip:"Refresh data when this event is fired."},{type:"textfield",label:"Triggered Event",key:"event",input:!0,weight:120,tooltip:"The event to fire when triggered.",description:"When in a datagrid or editgrid, { { rowIndex } } is available for interpolation to target a specific row."}];var a=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},l=n.Components.components.component.editForm;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.apply(void 0,a([[{key:"data",components:r},{label:"Trigger",key:"trigger",weight:10,components:o},{label:"Fetch",key:"fetch",weight:20,components:s},{key:"display",ignore:!0},{key:"validation",ignore:!0},{key:"layout",ignore:!0}]],t))}var c,d=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},f=n.Components.components.component;const p=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return d(e,t),Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Data Source",icon:"cloud",group:"premium",documentation:"http://help.form.io/userguide/#datasource",weight:30,schema:e.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestHeaders",{get:function(){var t=this,e=new n.Formio.Headers;if(this.component.fetch&&this.component.fetch.headers)try{this.component.fetch.headers.forEach((function(i){i.key&&e.set(i.key,t.interpolate(i.value))}))}catch(t){console.warn(t.message)}return"POST"!==this.reqMethod||e.has("Content-type")||e.set("Content-type","application/json"),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reqMethod",{get:function(){return n.Utils._.get(this.component,"fetch.method","get").toUpperCase()},enumerable:!1,configurable:!0}),e.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f.schema.apply(f,u([{label:"Data Source",key:"dataSource",type:"datasource",persistent:"client-only"}],t))},e.prototype.init=function(){return n.Utils._.get(this.component,"trigger.init",!1)&&this.refresh(),t.prototype.init.call(this)},e.prototype.render=function(){return this.builderMode?t.prototype.render.call(this,this.component.label||"Data Source"):t.prototype.render.call(this," ")},e.prototype.attach=function(e){return this.attachRefreshOnBlur(),this.attachRefreshOnEvent(),t.prototype.attach.call(this,e)},e.prototype.attachRefreshOnBlur=function(){var t=this;this.component.refreshOnBlur&&this.on("blur",(function(e){t.checkRefreshOn([{instance:e,value:e.dataValue}],{fromBlur:!0})}))},e.prototype.attachRefreshOnEvent=function(){var t=this;this.component.refreshOnEvent&&this.on(this.component.refreshOnEvent,(function(){return t.refresh()}))},e.prototype.refresh=function(t,e,i){if(!this.options.readOnly)switch(this.component.dataSrc){case"url":this.getDataFromUrl(i);break;case"indexeddb":window.indexedDB||window.alert("Your browser doesn't support current version of indexedDB"),this.getDataFromIndexedDb(i)}},e.prototype.getDataFromUrl=function(t){var e=this,i=null;n.Utils._.get(this.component,"fetch.specifyPostBody","")&&"POST"===this.reqMethod&&(i=this.specifyBody());var r=n.Formio.makeStaticRequest(this.interpolate(this.component.fetch.url),this.reqMethod,i,{headers:this.requestHeaders,noToken:!(this.component.fetch&&this.component.fetch.authenticate),ignoreCache:!this.component.allowCaching});Promise.all([r,this.root&&this.root.submissionReady?this.root.submissionReady:Promise.resolve()]).then((function(i){setTimeout((function(){e.assign(i[0],t)}))}))},e.prototype.getDataFromIndexedDb=function(t){var e=this;if(this.component.indexeddb&&this.component.indexeddb.database&&this.component.indexeddb.table){var i=window.indexedDB.open(this.component.indexeddb.database);i.onupgradeneeded=function(t){if(e.component.customOptions){var i=t.target.result;i.createObjectStore(e.component.indexeddb.table,{keyPath:"myKey",autoIncrement:!0}).transaction.oncomplete=function(){var t=i.transaction(e.component.indexeddb.table,"readwrite");e.component.customOptions.forEach((function(i){t.objectStore(e.component.indexeddb.table).put(i)}))}}},i.onerror=function(){window.alert(i.errorCode)},i.onsuccess=function(i){var r=i.target.result.transaction(e.component.indexeddb.table,"readwrite").objectStore(e.component.indexeddb.table);new n.Formio.Promise((function(t){var e=[];r.getAll().onsuccess=function(i){i.target.result.forEach((function(t){e.push(t)})),t(e)}})).then((function(i){return e.assign(i,t)}))}}},e.prototype.assign=function(t,e){n.Utils._.isEqual(this.dataValue,t)||(this.dataValue=t,this.triggerChange(e&&e.fromSubmission?{dataSourceInitialLoading:!0}:null)),this.component.event&&this.emitEvents()},e.prototype.emitEvents=function(){this.emit(this.interpolate(this.component.event),this.data),this.events.emit(this.interpolate(this.component.event),this.data),this.emit("customEvent",{type:this.interpolate(this.component.event),component:this.component,data:this.data})},e.prototype.validateMultiple=function(){return!1},e.prototype.specifyBody=function(){var t=null;try{t=this.evaluate(this.component.fetch.specifyPostBody,{value:this.dataValue,row:this.data,data:this.rootValue,component:this.component},"body")}catch(e){t=null}return t},e.editForm=h,e}(f);var g,m={move:"M",line:"L",curve:"C",arc:"A",close:"Z"};"undefined"!=typeof window?g=window:void 0!==i.g?g=i.g:"undefined"!=typeof self&&(g=self);var v,y=g,_=function(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}},b=function(t){v=t},w=function(t,e){e=e&&e.identity()||new v;for(var i=t,n=[];i&&i._matrix;)n.push(i._matrix),i=i.parent;n.reverse();for(var r=0;r<n.length;r++){var s=n[r].elements;e.multiply(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9])}return e},x=function(t,e,i){return i*(e-t)+t},k=function(t,e){for(;t<0;)t+=e;return t%e},S=y.Float32Array||Array,C=function(t){return Math.floor(1e6*t)/1e6},R=Object.freeze({__proto__:null,decomposeMatrix:_,getComputedMatrix:w,setMatrix:b,lerp:x,mod:k,NumArray:S,toFixed:C}),M=Array.prototype.slice,O={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){for(var e=M.call(arguments,1),i=0;i<e.length;i++){var n=e[i];for(var r in n)t[r]=n[r]}return t},defaults:function(t){for(var e=M.call(arguments,1),i=0;i<e.length;i++){var n=e[i];for(var r in n)void 0===t[r]&&(t[r]=n[r])}return t},each:function(t,e,i){for(var n=i||this,r=!function(t){if(null==t)return!1;var e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),s=(r||t).length,o=0;o<s;o++){var a=r?r[o]:o;e.call(n,t[a],a,t)}return t},performance:y.performance&&y.performance.now?y.performance:Date},E=function(t,e,i){var n;switch(i.length){case 0:n=function(n){e[n].call(t,i[0])};break;case 1:n=function(n){e[n].call(t,i[0],i[1])};break;case 2:n=function(n){e[n].call(t,i[0],i[1],i[2])};break;case 3:n=function(n){e[n].call(t,i[0],i[1],i[2],i[3])};break;default:n=function(n){e[n].apply(t,i)}}for(var r=0;r<e.length;r++)n(r)},A={on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var i=t?[t]:Object.keys(this._events),n=0,r=i.length;n<r;n++){t=i[n];var s=this._events[t];if(s){var o=[];if(e)for(var a=0,l=s.length;a<l;a++){var h=s[a];h=h.handler?h.handler:h,e&&e!==h&&o.push(h)}this._events[t]=o}}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1),i=this._events[t];return i&&E(this,i,e),this},listen:function(t,e,i){var n=this;if(t){var r=function(){i.apply(n,arguments)};r.obj=t,r.name=e,r.handler=i,t.on(e,r)}return this},ignore:function(t,e,i){return t.off(e,i),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};A.bind=A.on,A.unbind=A.off;var T=function(t,e){this.x=t||0,this.y=e||0};O.extend(T,{zero:new T,add:function(t,e){return new T(t.x+e.x,t.y+e.y)},sub:function(t,e){return new T(t.x-e.x,t.y-e.y)},subtract:function(t,e){return T.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var i,n;return arguments.length>=4?(i=arguments[0]-arguments[2],n=arguments[1]-arguments[3],Math.atan2(n,i)):(i=t.x-e.x,n=t.y-e.y,Math.atan2(n,i))},distanceBetween:function(t,e){return Math.sqrt(T.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",F),Object.defineProperty(this,"y",I),O.extend(this,P),this._bound=!0),A.bind.apply(this,arguments),this}}}),O.extend(T.prototype,A,{constructor:T,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new T(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),O.isNaN(this.x)&&(this.x=0),O.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var i=(t.x-this.x)*e+this.x,n=(t.y-this.y)*e+this.y;return this.set(i,n)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.x=this.x*e-this.y*i,this.y=this.x*i+this.y*e,this}});var P={constructor:T,set:function(t,e){return this._x=t,this._y=e,this.trigger(A.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(A.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(A.Types.change)},clone:function(){return new T(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(A.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(A.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(A.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),O.isNaN(this._x)&&(this._x=0),O.isNaN(this._y)&&(this._y=0),this.trigger(A.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,i=this._y-t.y;return e*e+i*i},lerp:function(t,e){var i=(t.x-this._x)*e+this._x,n=(t.y-this._y)*e+this._y;return this.set(i,n)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this._x=this._x*e-this._y*i,this._y=this._x*i+this._y*e,this}},F={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(A.Types.change,"x")}},I={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(A.Types.change,"y")}};T.MakeObservable(T.prototype);var z=function(t,e,i,n,r,s,o){T.call(this,t,e),this._broadcast=function(){this.trigger(A.Types.change)}.bind(this),this._command=o||m.move,this._relative=!0;var a="number"==typeof i,l="number"==typeof n,h="number"==typeof r,c="number"==typeof s;(a||l||h||c)&&z.AppendCurveProperties(this),a&&(this.controls.left.x=i),l&&(this.controls.left.y=n),h&&(this.controls.right.x=r),c&&(this.controls.right.y=s)};O.extend(z,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new T(0,0),t.controls.right=new T(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==m.curve||O.isObject(this.controls)||z.AppendCurveProperties(this),this.trigger(A.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(A.Types.change))}}),O.extend(t,T.prototype,j),t.bind=t.on=function(){var t=this._bound;T.prototype.bind.apply(this,arguments),t||O.extend(this,j)}}});var j={constructor:z,listen:function(){return O.isObject(this.controls)||z.AppendCurveProperties(this),this.controls.left.bind(A.Types.change,this._broadcast),this.controls.right.bind(A.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(A.Types.change,this._broadcast),this.controls.right.unbind(A.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),O.isObject(t.controls)&&(O.isObject(this.controls)||z.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===m.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,e=new z(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};z.MakeObservable(z.prototype);var D=Math.cos,L=Math.sin,B=Math.tan,V=[],N=function(t,e,i,n,r,s){this.elements=new S(9);var o=t;Array.isArray(o)||(o=Array.prototype.slice.call(arguments)),this.identity(),o.length>0&&this.set(o)};b(N),O.extend(N,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,i){if(e.length<=3){var n=t,r=e[0]||0,s=e[1]||0,o=e[2]||0;return{x:n[0]*r+n[1]*s+n[2]*o,y:n[3]*r+n[4]*s+n[5]*o,z:n[6]*r+n[7]*s+n[8]*o}}var a=t[0],l=t[1],h=t[2],c=t[3],d=t[4],u=t[5],f=t[6],p=t[7],g=t[8],m=e[0],v=e[1],y=e[2],_=e[3],b=e[4],w=e[5],x=e[6],k=e[7],C=e[8];return(i=i||new S(9))[0]=a*m+l*_+h*x,i[1]=a*v+l*b+h*k,i[2]=a*y+l*w+h*C,i[3]=c*m+d*_+u*x,i[4]=c*v+d*b+u*k,i[5]=c*y+d*w+u*C,i[6]=f*m+p*_+g*x,i[7]=f*v+p*b+g*k,i[8]=f*y+p*w+g*C,i}}),O.extend(N.prototype,A,{constructor:N,manual:!1,set:function(t,e,i,n,r,s,o,a,l){var h;return void 0===e&&(t=(h=t)[0],e=h[1],i=h[2],n=h[3],r=h[4],s=h[5],o=h[6],a=h[7],l=h[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=n,this.elements[4]=r,this.elements[5]=s,this.elements[6]=o,this.elements[7]=a,this.elements[8]=l,this.trigger(A.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(A.Types.change)},identity:function(){return this.elements[0]=N.Identity[0],this.elements[1]=N.Identity[1],this.elements[2]=N.Identity[2],this.elements[3]=N.Identity[3],this.elements[4]=N.Identity[4],this.elements[5]=N.Identity[5],this.elements[6]=N.Identity[6],this.elements[7]=N.Identity[7],this.elements[8]=N.Identity[8],this.trigger(A.Types.change)},multiply:function(t,e,i,n,r,s,o,a,l){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(A.Types.change);if(void 0===n)return t=t||0,e=e||0,i=i||0,{x:(r=this.elements)[0]*t+r[1]*e+r[2]*i,y:r[3]*t+r[4]*e+r[5]*i,z:r[6]*t+r[7]*e+r[8]*i};var h=this.elements,c=[t,e,i,n,r,s,o,a,l],d=h[0],u=h[1],f=h[2],p=h[3],g=h[4],m=h[5],v=h[6],y=h[7],_=h[8],b=c[0],w=c[1],x=c[2],k=c[3],S=c[4],C=c[5],R=c[6],M=c[7],O=c[8];return this.elements[0]=d*b+u*k+f*R,this.elements[1]=d*w+u*S+f*M,this.elements[2]=d*x+u*C+f*O,this.elements[3]=p*b+g*k+m*R,this.elements[4]=p*w+g*S+m*M,this.elements[5]=p*x+g*C+m*O,this.elements[6]=v*b+y*k+_*R,this.elements[7]=v*w+y*S+_*M,this.elements[8]=v*x+y*C+_*O,this.trigger(A.Types.change)},inverse:function(t){var e=this.elements;t=t||new N;var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8],d=c*o-a*h,u=-c*s+a*l,f=h*s-o*l,p=i*d+n*u+r*f;return p?(p=1/p,t.elements[0]=d*p,t.elements[1]=(-c*n+r*h)*p,t.elements[2]=(a*n-r*o)*p,t.elements[3]=u*p,t.elements[4]=(c*i-r*l)*p,t.elements[5]=(-a*i+r*s)*p,t.elements[6]=f*p,t.elements[7]=(-h*i+n*l)*p,t.elements[8]=(o*i-n*s)*p,t):null},scale:function(t,e){var i=arguments.length;return i<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=D(t),i=L(t);return this.multiply(e,-i,0,i,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=B(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=B(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){return V.length=0,this.toTransformArray(t,V),V.map(C).join(" ")},toTransformArray:function(t,e){var i=this.elements,n=!!e,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],h=i[5];if(t){var c=i[6],d=i[7],u=i[8];return n?(e[0]=r,e[1]=a,e[2]=c,e[3]=s,e[4]=l,e[5]=d,e[6]=o,e[7]=h,void(e[8]=u)):[r,a,c,s,l,d,o,h,u]}return n?(e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=o,void(e[5]=h)):[r,a,s,l,o,h]},toArray:function(t,e){var i=this.elements,n=!!e,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],h=i[5];if(t){var c=i[6],d=i[7],u=i[8];return n?(e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=h,e[6]=c,e[7]=d,void(e[8]=u)):[r,s,o,a,l,h,c,d,u]}return n?(e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,void(e[5]=h)):[r,s,o,a,l,h]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new N).copy(this)}});var U=0,W={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.1",PublishDate:"2021-01-13T01:57:28.198Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return U++}},H=Math.PI/2,q={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},G=function(t,e,i,n,r){var s=1-t;return s*s*s*e+3*s*s*t*i+3*s*t*t*n+t*t*t*r},X=function(t,e,i,n,r,s,o,a,l){var h=(l=l||q.RecursionLimit)+1;if(Math.abs(t-o)<.001&&Math.abs(e-a)<.001)return[new z(o,a)];for(var c=[],d=0;d<h;d++){var u=d/h,f=G(u,t,i,r,o),p=G(u,e,n,s,a);c.push(new z(f,p))}return c},Y=function(t,e,i,n,r,s,o,a,l){if(t===i&&e===n&&r===o&&s===a){var h=o-t,c=a-e;return Math.sqrt(h*h+c*c)}var d=9*(i-r)+3*(o-t),u=6*(t+r)-12*i,f=3*(i-t),p=9*(n-s)+3*(a-e),g=6*(e+s)-12*n,m=3*(n-e);return K((function(t){var e=(d*t+u)*t+f,i=(p*t+g)*t+m;return Math.sqrt(e*e+i*i)}),0,1,l||q.RecursionLimit)},Z=function(t,e,i,n,r,s,o,a){for(var l,h,c,d,u,f,p,g,m=[],v=[[],[]],y=0;y<2;++y)if(0==y?(h=6*t-12*i+6*r,l=-3*t+9*i-9*r+3*o,c=3*i-3*t):(h=6*e-12*n+6*s,l=-3*e+9*n-9*s+3*a,c=3*n-3*e),Math.abs(l)<1e-12){if(Math.abs(h)<1e-12)continue;0<(d=-c/h)&&d<1&&m.push(d)}else p=h*h-4*c*l,g=Math.sqrt(p),p<0||(0<(u=(-h+g)/(2*l))&&u<1&&m.push(u),0<(f=(-h-g)/(2*l))&&f<1&&m.push(f));for(var _,b=m.length,w=b;b--;)_=1-(d=m[b]),v[0][b]=_*_*_*t+3*_*_*d*i+3*_*d*d*r+d*d*d*o,v[1][b]=_*_*_*e+3*_*_*d*n+3*_*d*d*s+d*d*d*a;return v[0][w]=t,v[1][w]=e,v[0][w+1]=o,v[1][w+1]=a,v[0].length=v[1].length=w+2,{min:{x:Math.min.apply(0,v[0]),y:Math.min.apply(0,v[1])},max:{x:Math.max.apply(0,v[0]),y:Math.max.apply(0,v[1])}}},K=function(t,e,i,n){for(var r=q.abscissas[n-2],s=q.weights[n-2],o=.5*(i-e),a=o+e,l=0,h=n+1>>1,c=1&n?s[l++]*t(a):0;l<h;){var d=o*r[l];c+=s[l++]*(t(a+d)+t(a-d))}return o*c},$=function(t,e){for(var i=t.length,n=i-1,r=0;r<i;r++){var s=t[r];O.isObject(s.controls)||z.AppendCurveProperties(s);var o=e?k(r-1,i):Math.max(r-1,0),a=e?k(r+1,i):Math.min(r+1,n),l=t[o],h=s,c=t[a];J(l,h,c),h.command=0===r?m.move:m.curve}},J=function(t,e,i){var n=T.angleBetween(t,e),r=T.angleBetween(i,e),s=T.distanceBetween(t,e),o=T.distanceBetween(i,e),a=(n+r)/2;return s<1e-4||o<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(s*=.33,o*=.33,r<n?a+=H:a-=H,e.controls.left.x=Math.cos(a)*s,e.controls.left.y=Math.sin(a)*s,a-=Math.PI,e.controls.right.x=Math.cos(a)*o,e.controls.right.y=Math.sin(a)*o,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},Q=function(t,e,i){return new T(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))},tt=Object.freeze({__proto__:null,Curve:q,getComponentOnCubicBezier:G,subdivide:X,getCurveLength:Y,getCurveBoundingBox:Z,integrate:K,getCurveFromPoints:$,getControlPoints:J,getReflection:Q,getAnchorsFromArcData:function(t,e,i,n,r,s,o){(new N).translate(t.x,t.y).rotate(e);for(var a=W.Resolution,l=0;l<a;l++){var h=(l+1)/a;o&&(h=1-h);var c=h*s+r,d=i*Math.cos(c),u=n*Math.sin(c),f=new z(d,u);z.AppendCurveProperties(f),f.command=m.line}}}),et=y.devicePixelRatio||1,it=function(t){return et/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)},nt=function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])};(nt.prototype=new Array).constructor=nt,O.extend(nt.prototype,A,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(A.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(A.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(A.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(A.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(A.Types.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(A.Types.insert,t),this.trigger(A.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(A.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(A.Types.order),this}});var rt=function(){this._renderer={},this._renderer.flagMatrix=rt.FlagMatrix.bind(this),this.isShape=!0,this.id=W.Identifier+W.uniqueId(),this.classList=[],this.matrix=new N,this.translation=new T,this.rotation=0,this.scale=1};O.extend(rt,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(A.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(A.Types.change,this._renderer.flagMatrix),rt.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof T&&this._scale.unbind(A.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof T&&this._scale.bind(A.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),i=t.split(/\s+?/),n=0;n<e.length;n++){var r=e[n],s=Array.prototype.indexOf.call(this.classList,r);s>=0&&this.classList.splice(s,1)}this.classList=this.classList.concat(i)}this._className=t}})}}),O.extend(rt.prototype,A,{_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_translation:null,_rotation:0,_scale:1,_className:"",constructor:rt,addTo:function(t){return t.add(this),this},clone:function(t){var e=new rt;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof T?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),rt.MakeObservable(rt.prototype);var st=function(){nt.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(A.Types.insert,this.attach),this.on(A.Types.remove,this.detach),st.prototype.attach.apply(this,arguments)};st.prototype=new nt,O.extend(st.prototype,{constructor:st,attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var ot=Math.min,at=Math.max,lt=function(t){rt.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)};function ht(t,e){var i,n=t.parent;function r(){e.subtractions.length>0&&(i=Array.prototype.indexOf.call(e.subtractions,t))>=0&&e.subtractions.splice(i,1),e.additions.length>0&&(i=Array.prototype.indexOf.call(e.additions,t))>=0&&e.additions.splice(i,1),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function s(){(i=Array.prototype.indexOf.call(n.additions,t))>=0&&n.additions.splice(i,1),(i=Array.prototype.indexOf.call(n.subtractions,t))<0&&(n.subtractions.push(t),n._flagSubtractions=!0)}n!==e?(n&&n.children.ids[t.id]&&(i=Array.prototype.indexOf.call(n.children,t),n.children.splice(i,1),s()),e?r():(s(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete t.parent)):r()}O.extend(lt,{Children:st,InsertChildren:function(t){for(var e=0;e<t.length;e++)ht.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)ht.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","visible","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=lt.Properties;Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),rt.MakeObservable(t),lt.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=lt.InsertChildren.bind(this),i=lt.RemoveChildren.bind(this),n=lt.OrderChildren.bind(this);this._children&&this._children.unbind(),this._children=new st(t),this._children.bind(A.Types.insert,e),this._children.bind(A.Types.remove,i),this._children.bind(A.Types.order,n)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){Array.isArray(e)||(e=[e]),O.each(e,(function(e){lt.MakeGetterSetter(t,e)}))},MakeGetterSetter:function(t,e){var i="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[i]},set:function(t){this[i]=t;for(var n=0;n<this.children.length;n++)this.children[n][e]=t}})}}),O.extend(lt.prototype,rt.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,constructor:lt,clone:function(t){var e=new lt,i=this.children.map((function(t){return t.clone()}));return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof T?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),O.each(this.children,(function(e,i){t.children[i]=e.toObject()}),this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach((function(t){t.translation.sub(e)})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},this.children.forEach((function(e){e.isShape&&e.translation.sub(t.centroid)})),this},getById:function(t){var e=null;return function i(n){if(n.id===t)return n;if(n.children)for(var r=0;r<n.children.length;r++)if(e=i(n.children[r]))return e;return null}(this)},getByClassName:function(t){var e=[];return function i(n){if(Array.prototype.indexOf.call(n.classList,t)>=0&&e.push(n),n.children)for(var r=0;r<n.children.length;r++)i(n.children[r]);return e}(this)},getByType:function(t){var e=[];return function i(n){if(n instanceof t&&e.push(n),n.children)for(var r=0;r<n.children.length;r++)i(n.children[r]);return e}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var i=t[e];if(i&&i.id){var n=Array.prototype.indexOf.call(this.children,i);n>=0&&this.children.splice(n,1),this.children.push(i)}}return this},remove:function(t){var e=arguments.length,i=this.parent;if(e<=0&&i)return i.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var n=0;n<t.length;n++)t[n]&&this.children.ids[t[n].id]&&this.children.splice(Array.prototype.indexOf.call(this.children,t[n]),1);return this},getBoundingClientRect:function(t){var e;this._update(!0);for(var i=1/0,n=-1/0,r=1/0,s=-1/0,o=/texture|gradient/i,a=0;a<this.children.length;a++){var l=this.children[a];l.visible&&!o.test(l._renderer.type)&&"number"==typeof(e=l.getBoundingClientRect(t)).top&&"number"==typeof e.left&&"number"==typeof e.right&&"number"==typeof e.bottom&&(r=ot(e.top,r),i=ot(e.left,i),n=at(e.right,n),s=at(e.bottom,s))}return{top:r,left:i,right:n,bottom:s,width:n-i,height:s-r}},noFill:function(){return this.children.forEach((function(t){t.noFill()})),this},noStroke:function(){return this.children.forEach((function(t){t.noStroke()})),this},subdivide:function(){var t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this},_update:function(){if(this._flagBeginning||this._flagEnding)for(var t=Math.min(this._beginning,this._ending),e=Math.max(this._beginning,this._ending),i=this.length,n=0,r=t*i,s=e*i,o=0;o<this.children.length;o++){var a=this.children[o],l=a.length;r>n+l?(a.beginning=1,a.ending=1):s<n?(a.beginning=0,a.ending=0):r>n&&r<n+l?(a.beginning=(r-n)/l,a.ending=1):s>n&&s<n+l?(a.beginning=0,a.ending=(s-n)/l):(a.beginning=0,a.ending=1),n+=l}return rt.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,rt.prototype.flagReset.call(this),this}}),lt.MakeObservable(lt.prototype);var ct=[],dt=2*Math.PI,ut=Math.max,ft=Math.min,pt=Math.abs,gt=Math.sin,mt=Math.cos,vt=Math.acos,yt=Math.sqrt,_t=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},bt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){bt[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var n=this._mask,r=_t(e),s=!r||!!n;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,s&&(t.save(),r||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),n&&bt[n._renderer.type].render.call(n,t,!0),this.opacity>0&&0!==this.scale)for(var o=0;o<this.children.length;o++){var a=this.children[o];bt[a._renderer.type].render.call(a,t)}return s&&t.restore(),this.flagReset()}},path:{render:function(t,e,i){var n,r,s,o,a,l,h,c,d,u,f,p,g,v,y,_,b,w,x,S,C,R,M,O,E,A,P,F,I,z,j,D,L;if(this._update(),n=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,a=this._opacity*this.parent._renderer.opacity,l=this._visible,h=this._cap,c=this._join,d=this._miter,u=this._closed,g=(p=(f=this._renderer.vertices).length)-1,j=_t(n),L=this.dashes,z=this._clip,!e&&(!l||z))return this;j||(t.save(),t.transform(n[0],n[3],n[1],n[4],n[2],n[5])),o&&("string"==typeof o?t.fillStyle=o:(bt[o._renderer.type].render.call(o,t),t.fillStyle=o._renderer.effect)),r&&("string"==typeof r?t.strokeStyle=r:(bt[r._renderer.type].render.call(r,t),t.strokeStyle=r._renderer.effect),s&&(t.lineWidth=s),d&&(t.miterLimit=d),c&&(t.lineJoin=c),!u&&h&&(t.lineCap=h)),"number"==typeof a&&(t.globalAlpha=a),L&&L.length>0&&(t.lineDashOffset=L.offset||0,t.setLineDash(L)),t.beginPath();for(var B=0;B<f.length;B++)switch(F=(b=f[B]).x,I=b.y,b.command){case m.close:t.closePath();break;case m.arc:var V=b.rx,N=b.ry,U=b.xAxisRotation,W=b.largeArcFlag,H=b.sweepFlag,q=(_=f[y=u?k(B-1,p):ut(B-1,0)]).x,G=_.y;bt.renderSvgArcCommand(t,q,G,V,N,W,H,U,F,I);break;case m.curve:y=u?k(B-1,p):Math.max(B-1,0),v=u?k(B+1,p):Math.min(B+1,g),_=f[y],w=f[v],O=_.controls&&_.controls.right||T.zero,E=b.controls&&b.controls.left||T.zero,_._relative?(R=O.x+_.x,M=O.y+_.y):(R=O.x,M=O.y),b._relative?(S=E.x+b.x,C=E.y+b.y):(S=E.x,C=E.y),t.bezierCurveTo(R,M,S,C,F,I),B>=g&&u&&(w=x,A=b.controls&&b.controls.right||T.zero,P=w.controls&&w.controls.left||T.zero,b._relative?(R=A.x+b.x,M=A.y+b.y):(R=A.x,M=A.y),w._relative?(S=P.x+w.x,C=P.y+w.y):(S=P.x,C=P.y),F=w.x,I=w.y,t.bezierCurveTo(R,M,S,C,F,I));break;case m.line:t.lineTo(F,I);break;case m.move:x=b,t.moveTo(F,I)}return u&&t.closePath(),z||i||(bt.isHidden.test(o)||((D=o._renderer&&o._renderer.offset)&&(t.save(),t.translate(-o._renderer.offset.x,-o._renderer.offset.y),t.scale(o._renderer.scale.x,o._renderer.scale.y)),t.fill(),D&&t.restore()),bt.isHidden.test(r)||((D=r._renderer&&r._renderer.offset)&&(t.save(),t.translate(-r._renderer.offset.x,-r._renderer.offset.y),t.scale(r._renderer.scale.x,r._renderer.scale.y),t.lineWidth=s/r._renderer.scale.x),t.stroke(),D&&t.restore())),j||t.restore(),z&&!i&&t.clip(),L&&L.length>0&&t.setLineDash(ct),this.flagReset()}},text:{render:function(t,e,i){this._update();var n,r,s,o,a,l,h,c,d,u,f,p=this._matrix.elements,g=this._stroke,m=this._linewidth,v=this._fill,y=this._decoration,_=this._opacity*this.parent._renderer.opacity,b=this._visible,w=_t(p),x=v._renderer&&v._renderer.offset&&g._renderer&&g._renderer.offset,k=this.dashes,S=bt.alignments[this._alignment]||this._alignment,C=this._baseline,R=this._clip;if(!e&&(!b||R))return this;if(w||(t.save(),t.transform(p[0],p[3],p[1],p[4],p[2],p[5])),x||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=S,t.textBaseline=C,v&&("string"==typeof v?t.fillStyle=v:(bt[v._renderer.type].render.call(v,t),t.fillStyle=v._renderer.effect)),g&&("string"==typeof g?t.strokeStyle=g:(bt[g._renderer.type].render.call(g,t),t.strokeStyle=g._renderer.effect),m&&(t.lineWidth=m)),"number"==typeof _&&(t.globalAlpha=_),k&&k.length>0&&(t.lineDashOffset=k.offset||0,t.setLineDash(k)),R||i||(bt.isHidden.test(v)||(v._renderer&&v._renderer.offset?(l=v._renderer.scale.x,h=v._renderer.scale.y,t.save(),t.translate(-v._renderer.offset.x,-v._renderer.offset.y),t.scale(l,h),n=this._size/v._renderer.scale.y,r=this._leading/v._renderer.scale.y,t.font=[this._style,this._weight,n+"px/",r+"px",this._family].join(" "),s=v._renderer.offset.x/v._renderer.scale.x,o=v._renderer.offset.y/v._renderer.scale.y,t.fillText(this.value,s,o),t.restore()):t.fillText(this.value,0,0)),bt.isHidden.test(g)||(g._renderer&&g._renderer.offset?(l=g._renderer.scale.x,h=g._renderer.scale.y,t.save(),t.translate(-g._renderer.offset.x,-g._renderer.offset.y),t.scale(l,h),n=this._size/g._renderer.scale.y,r=this._leading/g._renderer.scale.y,t.font=[this._style,this._weight,n+"px/",r+"px",this._family].join(" "),s=g._renderer.offset.x/g._renderer.scale.x,o=g._renderer.offset.y/g._renderer.scale.y,a=m/g._renderer.scale.x,t.lineWidth=a,t.strokeText(this.value,s,o),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(y)){var M=t.measureText(this.value),O=1;switch(y){case"underline":d=M.actualBoundingBoxAscent,f=M.actualBoundingBoxAscent;break;case"strikethrough":d=0,f=0,O=.5}switch(C){case"top":d+=this._size*O,f+=this._size*O;break;case"baseline":case"bottom":d-=this._size*O,f-=this._size*O}switch(S){case"left":case"start":c=0,u=M.width;break;case"right":case"end":c=-M.width,u=0;break;default:c=-M.width/2,u=M.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(c,d),t.lineTo(u,f),t.stroke()}return w||t.restore(),R&&!i&&t.clip(),k&&k.length>0&&t.setLineDash(ct),this.flagReset()}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var i=this.stops[e];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var i=this.stops[e];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof T||(this._renderer.offset=new T),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof T?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof T||(this._renderer.scale=new T),this._scale instanceof T?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,i,n,r,s,o,a,l,h){a=a*Math.PI/180,n=pt(n),r=pt(r);var c=(e-l)/2,d=(i-h)/2,u=mt(a)*c+gt(a)*d,f=-gt(a)*c+mt(a)*d,p=n*n,g=r*r,m=u*u,v=f*f,y=m/p+v/g;if(y>1){var _=yt(y);p=(n*=_)*n,g=(r*=_)*r}var b=p*v+g*m,w=yt(ut(0,(p*g-b)/b));s===o&&(w=-w);var x=w*n*f/r,S=-w*r*u/n,C=mt(a)*x-gt(a)*S+(e+l)/2,R=gt(a)*x+mt(a)*S+(i+h)/2,M=xt(1,0,(u-x)/n,(f-S)/r);!function(t,e,i,n,r,s,o,a,l){var h=q.Tolerance.epsilon,c=o-s,d=Math.abs(c)<h;(c=k(c,dt))<h&&(c=d?0:dt),!0!==a||d||(c===dt?c=-dt:c-=dt);for(var u=0;u<W.Resolution;u++){var f=s+u/(W.Resolution-1)*c,p=e+n*Math.cos(f),g=i+r*Math.sin(f);if(0!==l){var m=Math.cos(l),v=Math.sin(l),y=p-e,_=g-i;p=y*m-_*v+e,g=y*v+_*m+i}t.lineTo(p,g)}}(t,C,R,n,r,M,M+xt((u-x)/n,(f-S)/r,(-u-x)/n,(-f-S)/r)%dt,0===o,a)}},wt=function(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new lt,this.scene.parent=this};function xt(t,e,i,n){var r=t*i+e*n,s=yt(t*t+e*e)*yt(i*i+n*n),o=vt(ut(-1,ft(1,r/s)));return t*n-e*i<0&&(o=-o),o}O.extend(wt,{Utils:bt}),O.extend(wt.prototype,A,{constructor:wt,setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=void 0===i?it(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&O.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(A.Types.resize,t,e,i)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),bt.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});var kt={Image:null,isHeadless:!1,shim:function(t,e){return wt.Utils.shim(t),void 0!==e&&(kt.Image=e),kt.isHeadless=!0,t}},St={temp:y.document?y.document.createElement("div"):{},hasEventListeners:"function"==typeof y.addEventListener,bind:function(t,e,i,n){return this.hasEventListeners?t.addEventListener(e,i,!!n):t.attachEvent("on"+e,i),St},unbind:function(t,e,i,n){return St.hasEventListeners?t.removeEventListeners(e,i,!!n):t.detachEvent("on"+e,i),St},getRequestAnimationFrame:function(){var t,e=0,i=["ms","moz","webkit","o"],n=y.requestAnimationFrame;if(!n){for(var r=0;r<i.length;r++)n=y[i[r]+"RequestAnimationFrame"]||n,t=y[i[r]+"CancelAnimationFrame"]||y[i[r]+"CancelRequestAnimationFrame"]||t;n=n||function(t,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),s=y.setTimeout((function(){t(n+r)}),r);return e=n+r,s}}return n}},Ct=function(t){this.name="Two.js",this.message=t};(Ct.prototype=new Error).constructor=Ct;var Rt=function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0}})},Mt=function(){this.map={}};O.extend(Mt.prototype,{constructor:Mt,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}});var Ot=function(t,e,i){this._renderer={},this._renderer.type="stop",this.offset="number"==typeof t?t:Ot.Index<=0?0:1,this.opacity="number"==typeof i?i:1,this.color="string"==typeof e?e:Ot.Index<=0?"#fff":"#000",Ot.Index=(Ot.Index+1)%2};O.extend(Ot,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){O.each(Ot.Properties,(function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})}),t)}}),O.extend(Ot.prototype,A,{constructor:Ot,clone:function(){var t=new Ot;return O.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t},toObject:function(){var t={};return O.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),Ot.MakeObservable(Ot.prototype),Ot.prototype.constructor=Ot;var Et=function(t){this._renderer={},this._renderer.type="gradient",this.id=W.Identifier+W.uniqueId(),this.classList=[],this._renderer.flagStops=Et.FlagStops.bind(this),this._renderer.bindStops=Et.BindStops.bind(this),this._renderer.unbindStops=Et.UnbindStops.bind(this),this.spread="pad",this.stops=t};O.extend(Et,{Stop:Ot,Properties:["spread"],MakeObservable:function(t){O.each(Et.Properties,Rt,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var e=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(A.Types.insert,e).unbind(A.Types.remove,i),this._stops=new nt((t||[]).slice(0)),this._stops.bind(A.Types.insert,e).bind(A.Types.remove,i),e(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(A.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(A.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),O.extend(Et.prototype,A,{_flagStops:!1,_flagSpread:!1,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),i=new Et(e);return O.each(Et.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i},toObject:function(){var t={stops:this.stops.map((function(t){return t.toObject()}))};return O.each(Et.Properties,(function(e){t[e]=this[e]}),this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(A.Types.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),Et.MakeObservable(Et.prototype);var At=function(t,e,i,n,r){Et.call(this,r),this._renderer.type="linear-gradient";var s=At.FlagEndPoints.bind(this);this.left=(new T).bind(A.Types.change,s),this.right=(new T).bind(A.Types.change,s),"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof i&&(this.right.x=i),"number"==typeof n&&(this.right.y=n)};O.extend(At,{Stop:Ot,MakeObservable:function(t){Et.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),O.extend(At.prototype,Et.prototype,{_flagEndPoints:!1,constructor:At,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),i=new At(this.left._x,this.left._y,this.right._x,this.right._y,e);return O.each(Et.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i},toObject:function(){var t=Et.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(A.Types.change),this},flagReset:function(){return this._flagEndPoints=!1,Et.prototype.flagReset.call(this),this}}),At.MakeObservable(At.prototype);var Tt,Pt=function(t,e,i,n,r,s){Et.call(this,n),this._renderer.type="radial-gradient",this.center=(new T).bind(A.Types.change,function(){this._flagCenter=!0}.bind(this)),this.radius="number"==typeof i?i:20,this.focal=(new T).bind(A.Types.change,function(){this._flagFocal=!0}.bind(this)),"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof r&&(this.focal.x=r),"number"==typeof s&&(this.focal.y=s)};O.extend(Pt,{Stop:Ot,Properties:["radius"],MakeObservable:function(t){Et.MakeObservable(t),O.each(Pt.Properties,Rt,t)}}),O.extend(Pt.prototype,Et.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,constructor:Pt,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),i=new Pt(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return O.each(Et.Properties.concat(Pt.Properties),(function(t){i[t]=this[t]}),this),t&&t.add(i),i},toObject:function(){var t=Et.prototype.toObject.call(this);return O.each(Pt.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(A.Types.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,Et.prototype.flagReset.call(this),this}}),Pt.MakeObservable(Pt.prototype);var Ft={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};y.document&&(Tt=document.createElement("a"));var It=function(t,e){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=It.FlagOffset.bind(this),this._renderer.flagScale=It.FlagScale.bind(this),this.id=W.Identifier+W.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new T,"function"==typeof e){var i=function(){this.unbind(A.Types.load,i),"function"==typeof e&&e()}.bind(this);this.bind(A.Types.load,i)}if("string"==typeof t)this.src=t;else if("object"==typeof t){var n=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==n&&"[object HTMLCanvasElement]"!==n&&"[object HTMLVideoElement]"!==n&&"[object Image]"!==n||(this.image=t)}this._update()};O.extend(It,{Properties:["src","loaded","repeat"],RegularExpressions:Ft,ImageRegistry:new Mt,getAbsoluteURL:function(t){return Tt?(Tt.href=t,Tt.href):t},loadHeadlessBuffer:function(t,e){t.image.onload=e,t.image.src=t.src},getTag:function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"},getImage:function(t){var e,i=It.getAbsoluteURL(t);return It.ImageRegistry.contains(i)?It.ImageRegistry.get(i):(kt.Image?(e=new kt.Image,wt.Utils.shim(e,"img")):y.document?e=Ft.video.test(i)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),e.crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,It.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){var i=t.image,n=function(t){!kt.isHeadless&&i.removeEventListener&&"function"==typeof i.removeEventListener&&(i.removeEventListener("load",n,!1),i.removeEventListener("error",r,!1)),"function"==typeof e&&e()},r=function(e){throw kt.isHeadless||"function"!=typeof i.removeEventListener||(i.removeEventListener("load",n,!1),i.removeEventListener("error",r,!1)),new Ct("unable to load "+t.src)};"number"==typeof i.width&&i.width>0&&"number"==typeof i.height&&i.height>0?n():kt.isHeadless||"function"!=typeof i.addEventListener||(i.addEventListener("load",n,!1),i.addEventListener("error",r,!1)),t._src=It.getAbsoluteURL(t._src),!kt.isHeadless&&i&&i.getAttribute("two-src")||(kt.isHeadless||i.setAttribute("two-src",t.src),It.ImageRegistry.add(t.src,i),kt.isHeadless?It.loadHeadlessBuffer(t,n):t.image.src=t.src)},video:function(t,e){if(kt.isHeadless)throw new Ct("video textures are not implemented in headless environments.");var i=function(r){t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",n,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},n=function(e){throw t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",n,!1),new Ct("unable to load "+t.src)};t._src=It.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),It.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?i():(t.image.addEventListener("canplaythrough",i,!1),t.image.addEventListener("error",n,!1),t.image.src=t.src,t.image.load())}},load:function(t,e){t.src;var i=t.image,n=It.getTag(i);t._flagImage&&(/canvas/i.test(n)?It.Register.canvas(t,e):(t._src=!kt.isHeadless&&i.getAttribute("two-src")||i.src,It.Register[n](t,e))),t._flagSrc&&(i||(i=It.getImage(t.src),t.image=i),n=It.getTag(i),It.Register[n](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){O.each(It.Properties,Rt,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e;switch(It.getTag(t)){case"canvas":e="#"+t.id;break;default:e=t.src}It.ImageRegistry.contains(e)?this._image=It.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(A.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(A.Types.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof T&&this._scale.unbind(A.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof T&&this._scale.bind(A.Types.change,this._renderer.flagScale),this._flagScale=!0}})}}),O.extend(It.prototype,A,rt.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,constructor:It,clone:function(){var t=new It(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(A.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,It.load(this,function(){this.loaded=!0,this.trigger(A.Types.change).trigger(A.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),It.MakeObservable(It.prototype);var zt=Math.min,jt=Math.max,Dt=Math.ceil,Lt=Math.floor,Bt=function(t,e,i,n){rt.call(this),this._renderer.type="path",this._renderer.flagVertices=Bt.FlagVertices.bind(this),this._renderer.bindVertices=Bt.BindVertices.bind(this),this._renderer.unbindVertices=Bt.UnbindVertices.bind(this),this._renderer.flagFill=Bt.FlagFill.bind(this),this._renderer.flagStroke=Bt.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!n,this.dashes=[],this.dashes.offset=0};function Vt(t,e){if(0===e||1===e)return!0;for(var i=t._length*e,n=0,r=0;r<t._lengths.length;r++){var s=t._lengths[r];if(n>=i)return i-n>=0;n+=s}return!1}function Nt(t,e){var i=t._length;if(e<=0)return 0;if(e>=i)return t._lengths.length-1;for(var n=0,r=0;n<t._lengths.length;n++){if(r+t._lengths[n]>=e)return e-=r,Math.max(n-1,0)+e/t._lengths[n];r+=t._lengths[n]}return-1}function Ut(t,e,i){var n,r,s,o,a,l,h,c,d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return n=e.x,a=e.y,r=(d||e).x,l=(d||e).y,s=(u||t).x,h=(u||t).y,o=t.x,c=t.y,d&&e._relative&&(r+=e.x,l+=e.y),u&&t._relative&&(s+=t.x,h+=t.y),Y(n,a,r,l,s,h,o,c,i)}function Wt(t,e,i){var n,r,s,o,a,l,h,c,d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return n=e.x,a=e.y,r=(d||e).x,l=(d||e).y,s=(u||t).x,h=(u||t).y,o=t.x,c=t.y,d&&e._relative&&(r+=e.x,l+=e.y),u&&t._relative&&(s+=t.x,h+=t.y),X(n,a,r,l,s,h,o,c,i)}O.extend(Bt,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:Ut},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(A.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(A.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){rt.MakeObservable(t),O.each(Bt.Properties.slice(2,8),Rt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Pt||this._fill instanceof It)&&this._fill.unbind(A.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Pt||this._fill instanceof It)&&this._fill.bind(A.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Pt||this._stroke instanceof It)&&this._stroke.unbind(A.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Pt||this._stroke instanceof It)&&this._stroke.bind(A.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";O.each(this.vertices,(function(t){t[e]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(A.Types.insert,e).unbind(A.Types.remove,i),this._collection=t instanceof nt?t:new nt(t||[]),this._collection.bind(A.Types.insert,e).bind(A.Types.remove,i),e(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),O.extend(Bt.prototype,rt.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,_dashes:[],constructor:Bt,clone:function(t){for(var e=new Bt,i=0;i<this.vertices.length;i++)e.vertices.push(this.vertices[i].clone());for(var n=0;n<Bt.Properties.length;n++){var r=Bt.Properties[n];e[r]=this[r]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={vertices:this.vertices.map((function(t){return t.toObject()}))};return O.each(Bt.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof T?this.scale.toObject():this.scale,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},O.each(this.vertices,(function(e){e.subSelf(t.centroid),e.x+=t.width/2,e.y+=t.height/2})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},O.each(this.vertices,(function(e){e.subSelf(t.centroid)})),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,i,n,r,s,o,a,l,h=1/0,c=-1/0,d=1/0,u=-1/0;if(this._update(!0),e=t?this._matrix:w(this),i=this.linewidth/2,(n=this._renderer.vertices.length)<=0)return{width:0,height:0};for(r=0;r<n;r++)if(l=this._renderer.vertices[r],(s=this._renderer.vertices[(r+n-1)%n]).controls&&l.controls){o=s.relative?e.multiply(s.controls.right.x+s.x,s.controls.right.y+s.y,1):e.multiply(s.controls.right.x,s.controls.right.y,1),s=e.multiply(s.x,s.y,1),a=l.relative?e.multiply(l.controls.left.x+l.x,l.controls.left.y+l.y,1):e.multiply(l.controls.left.x,l.controls.left.y,1),l=e.multiply(l.x,l.y,1);var f=Z(s.x,s.y,o.x,o.y,a.x,a.y,l.x,l.y);d=zt(f.min.y-i,d),h=zt(f.min.x-i,h),c=jt(f.max.x+i,c),u=jt(f.max.y+i,u)}else r<=1&&(s=e.multiply(s.x,s.y,1),d=zt(s.y-i,d),h=zt(s.x-i,h),c=jt(s.x+i,c),u=jt(s.y+i,u)),l=e.multiply(l.x,l.y,1),d=zt(l.y-i,d),h=zt(l.x-i,h),c=jt(l.x+i,c),u=jt(l.y+i,u);return{top:d,left:h,right:c,bottom:u,width:c-h,height:u-d}},getPointAt:function(t,e){for(var i,n,r,s,o,a,l,h,c,d,u,f,p,g,v,y=this.length*Math.min(Math.max(t,0),1),_=this.vertices.length,b=_-1,w=null,S=null,C=0,R=this._lengths.length,M=0;C<R;C++){if(M+this._lengths[C]>=y){this._closed?(i=k(C,_),n=k(C-1,_),0===C&&(i=n,n=C)):(i=C,n=Math.min(Math.max(C-1,0),b)),w=this.vertices[i],S=this.vertices[n],y-=M,t=0!==this._lengths[C]?y/this._lengths[C]:0;break}M+=this._lengths[C]}if(null===w||null===S)return null;if(!w)return S;if(!S)return w;v=S.controls&&S.controls.right,g=w.controls&&w.controls.left,o=S.x,d=S.y,a=(v||S).x,u=(v||S).y,l=(g||w).x,f=(g||w).y,h=w.x,p=w.y,v&&S.relative&&(a+=S.x,u+=S.y),g&&w.relative&&(l+=w.x,f+=w.y),s=G(t,o,a,l,h),c=G(t,d,u,f,p);var E=x(o,a,t),A=x(d,u,t),T=x(a,l,t),P=x(u,f,t),F=x(l,h,t),I=x(f,p,t),j=x(E,T,t),D=x(A,P,t),L=x(T,F,t),B=x(P,I,t);return O.isObject(e)?(e.x=s,e.y=c,O.isObject(e.controls)||z.AppendCurveProperties(e),e.controls.left.x=j,e.controls.left.y=D,e.controls.right.x=L,e.controls.right.y=B,("boolean"===(e.relative,!1)||e.relative)&&(e.controls.left.x-=s,e.controls.left.y-=c,e.controls.right.x-=s,e.controls.right.y-=c),e.t=t,e):((r=new z(s,c,j-s,D-c,L-s,B-c,this._curved?m.curve:m.line)).t=t,r)},plot:function(){if(this.curved)return $(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?m.move:m.line;return this},subdivide:function(t){this._update();var e=this.vertices.length-1,i=this.vertices[e],n=this._closed||this.vertices[e]._command===m.close,r=[];return O.each(this.vertices,(function(s,o){if(o<=0&&!n)i=s;else{if(s.command===m.move)return r.push(new z(i.x,i.y)),o>0&&(r[r.length-1].command=m.line),void(i=s);var a=Wt(s,i,t);r=r.concat(a),O.each(a,(function(t,e){e<=0&&i.command===m.move?t.command=m.move:t.command=m.line})),o>=e&&(this._closed&&this._automatic?(a=Wt(s,i=s,t),r=r.concat(a),O.each(a,(function(t,e){e<=0&&i.command===m.move?t.command=m.move:t.command=m.line}))):n&&r.push(new z(s.x,s.y)),r[r.length-1].command=n?m.close:m.line),i=s}}),this),this._automatic=!1,this._curved=!1,this.vertices=r,this},_updateLength:function(t,e){e||this._update();var i=this.vertices.length-1,n=this.vertices[i],r=0;return void 0===this._lengths&&(this._lengths=[]),O.each(this.vertices,(function(e,i){if(i<=0||e.command===m.move)return n=e,void(this._lengths[i]=0);this._lengths[i]=Ut(e,n,t),r+=this._lengths[i],n=e}),this),this._length=r,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,e,i,n,r,s=this._collection.length,o=this._closed,a=Math.min(this._beginning,this._ending),l=Math.max(this._beginning,this._ending),h=Nt(this,a*this._length),c=Nt(this,l*this._length),d=Dt(h),u=Lt(c);this._renderer.vertices.length=0;for(var f=0;f<s;f++)this._renderer.collection.length<=f&&this._renderer.collection.push(new z),f>u&&!e?((r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(l,r),r.command=this._renderer.collection[f].command,this._renderer.vertices.push(r),e=r,(i=this._collection[f-1])&&i.controls&&(r.controls.right.clear(),this._renderer.collection[f-1].controls.right.clear().lerp(i.controls.right,r.t))):f>=d&&f<=u&&(r=this._renderer.collection[f].copy(this._collection[f]),this._renderer.vertices.push(r),f===u&&Vt(this,l)?(e=r,!o&&e.controls&&e.controls.right.clear()):f===d&&Vt(this,a)&&((t=r).command=m.move,!o&&t.controls&&t.controls.left.clear()));d>0&&!t&&(f=d-1,(r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(a,r),r.command=m.move,this._renderer.vertices.unshift(r),t=r,(n=this._collection[f+1])&&n.controls&&(r.controls.left.clear(),this._renderer.collection[f+1].controls.left.copy(n.controls.left).lerp(T.zero,r.t)))}return rt.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,rt.prototype.flagReset.call(this),this}}),Bt.MakeObservable(Bt.prototype);var Ht=2*Math.PI,qt=Math.PI/2,Gt=Math.cos,Xt=Math.sin,Yt=function(t,e,i,n){for(var r=n?Math.max(n,2):4,s=[],o=0;o<r;o++)s.push(new z);Bt.call(this,s,!0,!0,!0),this.radius=i,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};O.extend(Yt,{Properties:["radius"],MakeObservable:function(t){Bt.MakeObservable(t),O.each(Yt.Properties,Rt,t)}}),O.extend(Yt.prototype,Bt.prototype,{_flagRadius:!1,_radius:0,constructor:Yt,_update:function(){if(this._flagRadius)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._radius,i=e*t,n=0,r=this.vertices.length;n<r;n++){var s=n/r*Ht,o=e*Gt(s),a=e*Xt(s),l=i*Gt(s-qt),h=i*Xt(s-qt),c=i*Gt(s+qt),d=i*Xt(s+qt),u=this.vertices[n];u.command=m.curve,u.set(o,a),u.controls.left.set(l,h),u.controls.right.set(c,d)}return Bt.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,Bt.prototype.flagReset.call(this),this},clone:function(t){var e=new Yt(0,0,this.radius,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Bt.prototype.toObject.call(this);return O.each(Yt.Properties,(function(e){t[e]=this[e]}),this),t}}),Yt.MakeObservable(Yt.prototype);var Zt=2*Math.PI,Kt=Math.PI/2,$t=Math.cos,Jt=Math.sin,Qt=function(t,e,i,n,r){"number"!=typeof n&&(n=i);for(var s=r?Math.max(r,2):4,o=[],a=0;a<s;a++)o.push(new z);Bt.call(this,o,!0,!0,!0),this.width=2*i,this.height=2*n,this._update(),this.translation.set(t,e)};O.extend(Qt,{Properties:["width","height"],MakeObservable:function(t){Bt.MakeObservable(t),O.each(Qt.Properties,Rt,t)}}),O.extend(Qt.prototype,Bt.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:Qt,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._width/2,i=this._height/2,n=0,r=this.vertices.length;n<r;n++){var s=n/r*Zt,o=e*$t(s),a=i*Jt(s),l=e*t*$t(s-Kt),h=i*t*Jt(s-Kt),c=e*t*$t(s+Kt),d=i*t*Jt(s+Kt),u=this.vertices[n];u.command=m.curve,u.set(o,a),u.controls.left.set(l,h),u.controls.right.set(c,d)}return Bt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Bt.prototype.flagReset.call(this),this},clone:function(t){var e=this.width/2,i=this.height/2,n=this.vertices.length,r=new Qt(0,0,e,i,n);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Bt.prototype.toObject.call(this);return O.each(Qt.Properties,(function(e){t[e]=this[e]}),this),t}}),Qt.MakeObservable(Qt.prototype);var te=function(t,e,i,n){Bt.call(this,[new z(t,e),new z(i,n)]),this.vertices[0].command=m.move,this.vertices[1].command=m.line,this.automatic=!1};O.extend(te.prototype,Bt.prototype),te.prototype.constructor=te,Bt.MakeObservable(te.prototype);var ee=function(t,e,i,n){Bt.call(this,[new z,new z,new z,new z],!0,!1,!0),this.width=i,this.height=n,this.origin=new T,this.translation.set(t,e),this._update()};O.extend(ee,{Properties:["width","height"],MakeObservable:function(t){Bt.MakeObservable(t),O.each(ee.Properties,Rt,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(A.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(A.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),O.extend(ee.prototype,Bt.prototype,{_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,constructor:ee,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,e=this._height/2;this.vertices[0].set(-t,-e).add(this._origin).command=m.move,this.vertices[1].set(t,-e).add(this._origin).command=m.line,this.vertices[2].set(t,e).add(this._origin).command=m.line,this.vertices[3].set(-t,e).add(this._origin).command=m.line,this.vertices[4]&&(this.vertices[4].set(-t,-e).add(this._origin).command=m.line)}return Bt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Bt.prototype.flagReset.call(this),this},clone:function(t){var e=new ee(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Bt.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),ee.MakeObservable(ee.prototype);var ie=function(t,e,i,n,r){void 0===r&&(r=Math.floor(Math.min(i,n)/12));for(var s=[],o=0;o<10;o++)s.push(new z(0,0,0,0,0,0,0===o?m.move:m.curve));Bt.call(this,s),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=ie.FlagRadius.bind(this),this.width=i,this.height=n,this.radius=r,this._update(),this.translation.set(t,e)};O.extend(ie,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(t){Bt.MakeObservable(t),O.each(ie.Properties,Rt,t),Object.defineProperty(t,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof T&&this._radius.unbind(A.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof T&&this._radius.bind(A.Types.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),O.extend(ie.prototype,Bt.prototype,{_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:0,constructor:ie,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t,e,i,n=this._width,r=this._height;this._radius instanceof T?(t=this._radius.x,e=this._radius.y):(t=this._radius,e=this._radius);var s=n/2,o=r/2;(i=this.vertices[0]).x=-(s-t),i.y=-o,(i=this.vertices[1]).x=s-t,i.y=-o,i.controls.left.clear(),i.controls.right.x=t,i.controls.right.y=0,(i=this.vertices[2]).x=s,i.y=-(o-e),i.controls.right.clear(),i.controls.left.clear(),(i=this.vertices[3]).x=s,i.y=o-e,i.controls.left.clear(),i.controls.right.x=0,i.controls.right.y=e,(i=this.vertices[4]).x=s-t,i.y=o,i.controls.right.clear(),i.controls.left.clear(),(i=this.vertices[5]).x=-(s-t),i.y=o,i.controls.left.clear(),i.controls.right.x=-t,i.controls.right.y=0,(i=this.vertices[6]).x=-s,i.y=o-e,i.controls.left.clear(),i.controls.right.clear(),(i=this.vertices[7]).x=-s,i.y=-(o-e),i.controls.left.clear(),i.controls.right.x=0,i.controls.right.y=-e,(i=this.vertices[8]).x=-(s-t),i.y=-o,i.controls.left.clear(),i.controls.right.clear(),(i=this.vertices[9]).copy(this.vertices[8])}return Bt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,Bt.prototype.flagReset.call(this),this},clone:function(t){var e=this.width,i=this.height,n=this.radius,r=new ie(0,0,e,i,n);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Bt.prototype.toObject.call(this);return O.each(ie.Properties,(function(e){t[e]=this[e]}),this),t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}}),ie.MakeObservable(ie.prototype);var ne=function(t,e,i,n){if(rt.call(this),this._renderer.type="text",this._renderer.flagFill=ne.FlagFill.bind(this),this._renderer.flagStroke=ne.FlagStroke.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof i&&(this.translation.y=i),this.dashes=[],this.dashes.offset=0,!O.isObject(n))return this;O.each(ne.Properties,(function(t){t in n&&(this[t]=n[t])}),this)};O.extend(ne,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","className","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){rt.MakeObservable(t),O.each(ne.Properties.slice(0,12),Rt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Pt||this._fill instanceof It)&&this._fill.unbind(A.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Pt||this._fill instanceof It)&&this._fill.bind(A.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Pt||this._stroke instanceof It)&&this._stroke.unbind(A.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Pt||this._stroke instanceof It)&&this._stroke.bind(A.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),O.extend(ne.prototype,rt.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,_dashes:[],constructor:ne,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(t){var e=new ne(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,O.each(ne.Properties,(function(t){e[t]=this[t]}),this),this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),O.each(ne.Properties,(function(e){t[e]=this[e]}),this),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(t){var e,i,n,r,s,o;this._update(!0),e=t?this._matrix:w(this);var a=this.leading,l=this.value.length*this.size*ne.Ratio;switch(this.alignment){case"left":n=0,r=l;break;case"right":n=-l,r=0;break;default:n=-l/2,r=l/2}switch(this.baseline){case"top":s=0,o=a;break;case"bottom":s=-a,o=0;break;default:s=-a/2,o=a/2}return{top:s=(i=e.multiply(n,s,1)).y,left:n=i.x,right:r=(i=e.multiply(r,o,1)).x,bottom:o=i.y,width:r-n,height:o-s}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,rt.prototype.flagReset.call(this),this}}),ne.MakeObservable(ne.prototype);var re={start:"left",middle:"center",end:"right"},se=function(t,e){var i,n,r,s;e||(e={}),i=t.split(";");for(var o=0;o<i.length;o++)r=(n=i[o].split(":"))[0],s=n[1],void 0!==r&&void 0!==s&&(e[r]=s.replace(/\s/,""));return e},oe=function(t){for(var e={},i=ae(t),n=Math.max(i.length,t.style.length),r=0;r<n;r++){var s=t.style[r],o=i[r];s&&(e[s]=t.style[s]),o&&(e[o]=t.getAttribute(o))}return e},ae=function(t){for(var e=t.getAttributeNames(),i=["id","class","transform","xmlns","viewBox"],n=0;n<i.length;n++){var r=i[n],s=Array.prototype.indexOf.call(e,r);s>=0&&e.splice(s,1)}return e},le=function(t,e){var i=e.split(/\s/),n=parseFloat(i[0]),r=parseFloat(i[1]),s=parseFloat(i[2]),o=parseFloat(i[3]),a=Math.min(this.width/s,this.height/o);return t.translation.x-=n*a,t.translation.y-=r*a,t.scale=a,t},he=function(t,e,i){var n,r,s,o,a={},l={},h={};if(y.getComputedStyle){var c=y.getComputedStyle(t);for(n=c.length;n--;)void 0!==(s=c[r=c[n]])&&(a[r]=s)}for(n=0;n<t.attributes.length;n++)o=t.attributes[n],/style/i.test(o.nodeName)?se(o.value,h):l[o.nodeName]=o.value;for(r in void 0!==a.opacity&&(a["stroke-opacity"]=a.opacity,a["fill-opacity"]=a.opacity,delete a.opacity),i&&O.defaults(a,i),O.extend(a,h,l),a.visible=!(void 0===a.display&&/none/i.test(a.display))||void 0===a.visibility&&/hidden/i.test(a.visibility),a)switch(s=a[r],r){case"transform":if(/none/i.test(s))break;if(null===(p=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;if(W.AutoCalculateImportedMatrices){var d=_(p);e.translation.set(d.translateX,d.translateY),e.rotation=Math.PI*(d.rotation/180),e.scale=new T(d.scaleX,d.scaleY);var u=parseFloat((a.x+"").replace("px")),f=parseFloat((a.y+"").replace("px"));u&&(e.translation.x=u),f&&(e.translation.y=f)}else{var p=t.getCTM();e._matrix.manual=!0,e._matrix.set(p.a,p.b,p.c,p.d,p.e,p.f)}break;case"viewBox":le.call(this,e,s);break;case"visible":if(e instanceof lt){e._visible=s;break}e.visible=s;break;case"stroke-linecap":if(e instanceof lt){e._cap=s;break}e.cap=s;break;case"stroke-linejoin":if(e instanceof lt){e._join=s;break}e.join=s;break;case"stroke-miterlimit":if(e instanceof lt){e._miter=s;break}e.miter=s;break;case"stroke-width":if(e instanceof lt){e._linewidth=parseFloat(s);break}e.linewidth=parseFloat(s);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof lt){e._opacity=parseFloat(s);break}e.opacity=parseFloat(s);break;case"fill":case"stroke":if(e instanceof lt&&(r="_"+r),/url\(#.*\)/i.test(s)){var g=de(this);e[r]=g.getById(s.replace(/url\(#(.*)\)/i,"$1"))}else e[r]=/none/i.test(s)?"transparent":s;break;case"id":e.id=s,t.id=s+"-"+W.Identifier+"applied";break;case"class":case"className":e.classList=s.split(" ");break;case"x":case"y":if(e instanceof Et||e instanceof At||e instanceof Pt)break;if(s.match("[a-z%]$")&&!s.endsWith("px")){var m=new Ct("only pixel values are supported with the "+r+" attribute.");console.warn(m.name,m.message)}e.translation[r]=parseFloat(s);break;case"font-family":e instanceof ne&&(e.family=s);break;case"font-size":e instanceof ne&&(e.size=s);break;case"font-weight":e instanceof ne&&(e.weight=s);break;case"font-style":e instanceof ne&&(e.style=s);break;case"text-decoration":e instanceof ne&&(e.decoration=s);break;case"line-height":e instanceof ne&&(e.leading=s)}return a},ce=function(t,e){for(var i=0,n=t.childNodes.length;i<n;i++){var r=t.childNodes[i];r.id&&"#text"!==r.localName&&e.add(r.id,r)}},de=function(t){for(;t.parent;)t=t.parent;return t.scene},ue={svg:function(t){for(var e=ue.defs.current=new Mt,i=t.getElementsByTagName("defs"),n=0;n<i.length;n++)ce(i[n],e);var r=ue.g.call(this,t);return t.getAttribute("viewBox"),r.defs=e,delete ue.defs.current,r},defs:function(t){return null},use:function(t,e){var i=t.getAttribute("href")||t.getAttribute("xlink:href");if(!i){var n=new Ct("encountered <use /> with no href.");return console.warn(n.name,n.message),null}var r=i.slice(1);if(!ue.defs.current.contains(r))return n=new Ct("unable to find element for reference "+i+"."),console.warn(n.name,n.message),null;for(var s=ue.defs.current.get(r).cloneNode(!0),o=["x","y","width","height","href","xlink:href"],a=0;a<t.attributes.length;a++){var l=t.attributes[a],h=o.includes(l.nodeName),c=!s.hasAttribute(l.nodeName);(h||c)&&s.setAttribute(l.nodeName,l.value)}var d=s.localName;return ue[d].call(this,s,e)},g:function(t,e){var i,n=new lt;he.call(this,t,n,e),this.add(n),i=oe.call(this,t);for(var r=0,s=t.childNodes.length;r<s;r++){var o=t.childNodes[r],a=o.nodeName;if(!a)return;var l=a.replace(/svg:/gi,"").toLowerCase();if(l in ue){var h=ue[l].call(n,o,i);h&&!h.parent&&n.add(h)}}return n},polygon:function(t,e){var i=t.getAttribute("points"),n=[];i.replace(/(-?[\d.?]+)[,|\s](-?[\d.?]+)/g,(function(t,e,i){n.push(new z(parseFloat(e),parseFloat(i)))}));var r=new Bt(n,!0).noStroke();return r.fill="black",he.call(this,t,r,e),r},polyline:function(t,e){var i=ue.polygon.call(this,t,e);return i.closed=!1,i},path:function(t,e){var i=t.getAttribute("d"),n=[],r=!1,s=!1;if(i){var o,a,l=new z,h=i.match(/[a-df-z][^a-df-z]*/gi),c=h.length-1;O.each(h.slice(0),(function(t,e){var i,n,r,s,o,a,l,c,d,u=(t=function(t){var e=t.match(/[\+\-]?[\d\.]*e[\-\+]?\d*/gi);if(e&&e.length>0)for(var i=0;i<e.length;i++){var n=e[i],r=n.split(/e/i),s=parseFloat(r[0]),o=Math.pow(10,parseFloat(r[1]));o<0?s/=o:s*=o,t=t.replace(n,s)}return t}(t))[0],f=u.toLowerCase(),p=t.slice(1).trim().split(/[\s,]+|(?=\s?[+-])/),g=[],m=!1;for(o=0;o<p.length;o++)if((i=p[o]).indexOf(".")!==i.lastIndexOf(".")){for(r=(n=i.split("."))[0]+"."+n[1],p.splice(o,1,r),s=2;s<n.length;s++)p.splice(o+s-1,0,"0."+n[s]);m=!0}switch(m&&(t=u+p.join(",")),e<=0&&(h=[]),f){case"h":case"v":p.length>1&&(d=1);break;case"m":case"l":case"t":p.length>2&&(d=2);break;case"s":case"q":p.length>4&&(d=4);break;case"c":p.length>6&&(d=6);break;case"a":p.length>7&&(d=7)}if(d){for(o=0,l=p.length,c=0;o<l;o+=d){if(a=u,c>0)switch(u){case"m":a="l";break;case"M":a="L"}g.push(a+p.slice(o,o+d).join(" ")),c++}h=Array.prototype.concat.apply(h,g)}else h.push(t)})),O.each(h,(function(t,e){var i,h,d,u,f,p,g,v,y,_,b,w,x=t[0],k=x.toLowerCase();switch(a=(a=(a=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+-]?\d+)/g,(function(t,e,i){return parseFloat(e)*Math.pow(10,i)}))).split(/[\s,]+|(?=\s?[+-])/),s=x===k,k){case"z":if(e>=c)r=!0;else{h=l.x,d=l.y,i=new z(h,d,void 0,void 0,void 0,void 0,m.close);for(var S=n.length-1;S>=0;S--){var C=n[S];if(/m/i.test(C.command)){l=C;break}}}break;case"m":case"l":o=void 0,h=parseFloat(a[0]),d=parseFloat(a[1]),i=new z(h,d,void 0,void 0,void 0,void 0,/m/i.test(k)?m.move:m.line),s&&i.addSelf(l),l=i;break;case"h":case"v":var R=/h/i.test(k)?"x":"y",M=/x/i.test(R)?"y":"x";(i=new z(void 0,void 0,void 0,void 0,void 0,void 0,m.line))[R]=parseFloat(a[0]),i[M]=l[M],s&&(i[R]+=l[R]),l=i;break;case"c":case"s":u=l.x,f=l.y,o||(o=new T),/c/i.test(k)?(p=parseFloat(a[0]),g=parseFloat(a[1]),v=parseFloat(a[2]),y=parseFloat(a[3]),_=parseFloat(a[4]),b=parseFloat(a[5])):(p=(w=Q(l,o,s)).x,g=w.y,v=parseFloat(a[0]),y=parseFloat(a[1]),_=parseFloat(a[2]),b=parseFloat(a[3])),s&&(p+=u,g+=f,v+=u,y+=f,_+=u,b+=f),O.isObject(l.controls)||z.AppendCurveProperties(l),l.controls.right.set(p-l.x,g-l.y),i=new z(_,b,v-_,y-b,void 0,void 0,m.curve),l=i,o=i.controls.left;break;case"t":case"q":u=l.x,f=l.y,o||(o=new T),/q/i.test(k)?(p=parseFloat(a[0]),g=parseFloat(a[1]),v=parseFloat(a[0]),y=parseFloat(a[1]),_=parseFloat(a[2]),b=parseFloat(a[3])):(p=(w=Q(l,o,s)).x,g=w.y,v=w.x,y=w.y,_=parseFloat(a[0]),b=parseFloat(a[1])),s&&(p+=u,g+=f,v+=u,y+=f,_+=u,b+=f),O.isObject(l.controls)||z.AppendCurveProperties(l),l.controls.right.set(.33*(p-l.x),.33*(g-l.y)),i=new z(_,b,v-_,y-b,void 0,void 0,m.curve),l=i,o=i.controls.left;break;case"a":u=l.x,f=l.y;var E=parseFloat(a[0]),A=parseFloat(a[1]),P=parseFloat(a[2]),F=parseFloat(a[3]),I=parseFloat(a[4]);_=parseFloat(a[5]),b=parseFloat(a[6]),s&&(_+=u,b+=f);var j=new z(_,b);j.command=m.arc,j.rx=E,j.ry=A,j.xAxisRotation=P,j.largeArcFlag=F,j.sweepFlag=I,i=j,l=j,o=void 0}i&&(Array.isArray(i)?n=n.concat(i):n.push(i))}))}(i=new Bt(n,r,void 0,!0).noStroke()).fill="black";var d=i.getBoundingClientRect(!0);return d.centroid={x:d.left+d.width/2,y:d.top+d.height/2},O.each(i.vertices,(function(t){t.subSelf(d.centroid)})),he.call(this,t,i,e),i.translation.addSelf(d.centroid),i},circle:function(t,e){var i=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("r")),s=new Yt(0,0,r).noStroke();return s.fill="black",he.call(this,t,s,e),s.translation.x=i,s.translation.y=n,s},ellipse:function(t,e){var i=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("rx")),s=parseFloat(t.getAttribute("ry")),o=new Qt(0,0,r,s).noStroke();return o.fill="black",he.call(this,t,o,e),o.translation.x=i,o.translation.y=n,o},rect:function(t,e){var i=parseFloat(t.getAttribute("rx")),n=parseFloat(t.getAttribute("ry"));if(!O.isNaN(i)||!O.isNaN(n))return ue["rounded-rect"](t);parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var r=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),o=r/2,a=s/2,l=new ee(0,0,r,s).noStroke();return l.fill="black",he.call(this,t,l,e),l.translation.x+=o,l.translation.y+=a,l},"rounded-rect":function(t,e){parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var i=parseFloat(t.getAttribute("rx"))||0,n=parseFloat(t.getAttribute("ry"))||0,r=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),o=r/2,a=s/2,l=new T(i,n),h=new ie(0,0,r,s,l).noStroke();return h.fill="black",he.call(this,t,h,e),h.translation.x+=o,h.translation.y+=a,h},line:function(t,e){var i=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),o=new te(i,n,r,s).noFill();return he.call(this,t,o,e),o},lineargradient:function(t,e){for(var i=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),o=(r+i)/2,a=(s+n)/2,l=[],h=0;h<t.children.length;h++){var c=t.children[h],d=c.getAttribute("offset");/%/gi.test(d)&&(d=parseFloat(d.replace(/%/gi,""))/100),d=parseFloat(d);var u,f=c.getAttribute("stop-color"),p=c.getAttribute("stop-opacity"),g=c.getAttribute("style");null===f&&(f=(u=!!g&&g.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&u.length>1?u[1]:void 0),p=null===p?(u=!!g&&g.match(/stop-opacity:\s?([0-9.-]*)/))&&u.length>1?parseFloat(u[1]):1:parseFloat(p),l.push(new Ot(d,f,p))}var m=new At(i-o,n-a,r-o,s-a,l);return he.call(this,t,m,e),m},radialgradient:function(t,e){var i=parseFloat(t.getAttribute("cx"))||0,n=parseFloat(t.getAttribute("cy"))||0,r=parseFloat(t.getAttribute("r")),s=parseFloat(t.getAttribute("fx")),o=parseFloat(t.getAttribute("fy"));O.isNaN(s)&&(s=i),O.isNaN(o)&&(o=n);for(var a=Math.abs(i+s)/2,l=Math.abs(n+o)/2,h=[],c=0;c<t.children.length;c++){var d=t.children[c],u=d.getAttribute("offset");/%/gi.test(u)&&(u=parseFloat(u.replace(/%/gi,""))/100),u=parseFloat(u);var f,p=d.getAttribute("stop-color"),g=d.getAttribute("stop-opacity"),m=d.getAttribute("style");null===p&&(p=(f=!!m&&m.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&f.length>1?f[1]:void 0),g=null===g?(f=!!m&&m.match(/stop-opacity:\s?([0-9.-]*)/))&&f.length>1?parseFloat(f[1]):1:parseFloat(g),h.push(new Ot(u,p,g))}var v=new Pt(i-a,n-l,r,h,s-a,o-l);return he.call(this,t,v,e),v},text:function(t,e){var i,n=(i=t.getAttribute("text-anchor"),re[i]||"left"),r=function(t){var e=t.getAttribute("dominant-baseline"),i=t.getAttribute("alignment-baseline");return e||i}(t)||"baseline",s=t.textContent,o=new ne(s);return he.call(this,t,o,e),o.alignment=n,o.baseline=r,o}},fe=function(t,e){var i=new XMLHttpRequest;return i.open("GET",t),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e(i.responseText)},i.send(),i},pe=function(t,e,i,n){Bt.call(this,[new z,new z,new z,new z],!0),this._renderer.flagTextures=pe.FlagTextures.bind(this),this._renderer.bindTextures=pe.BindTextures.bind(this),this._renderer.unbindTextures=pe.UnbindTextures.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(pe.GenerateTexture.bind(this)):this.textures=[pe.GenerateTexture(t)],this.origin=new T,this._update(),this.translation.set(e||0,i||0),this.frameRate="number"==typeof n?n:pe.DefaultFrameRate,this.index=0};O.extend(pe,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(A.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(A.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){ee.MakeObservable(t),O.each(pe.Properties,Rt,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var e=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(A.Types.insert,e).unbind(A.Types.remove,i),this._textures=new nt((t||[]).slice(0)),this._textures.bind(A.Types.insert,e).bind(A.Types.remove,i),e(this._textures)}})},GenerateTexture:function(t){return t instanceof It?t:"string"==typeof t?new It(t):void 0}}),O.extend(pe.prototype,ee.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,constructor:pe,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=O.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(t){var e=new pe(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},toObject:function(){var t=ee.prototype.toObject.call(this);return t.textures=this.textures.map((function(t){return t.toObject()})),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,i,n,r,s,o,a,l=this._textures;return this._flagTextures&&(this._amount=l.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(n=this._amount,O.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=O.performance.now()-this._startTime,r=1e3*((a=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?i%=r:i=Math.min(i,r),o=x(this._firstFrame,a,i/r),(o=Math.floor(o))!==this._index&&(this._index=o,(s=l[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=s,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof It||((s=l[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e)),this.fill=s),ee.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,ee.prototype.flagReset.call(this),this}}),pe.MakeObservable(pe.prototype);var ge=function(t,e,i,n,r,s){Bt.call(this,[new z,new z,new z,new z],!0),this.noStroke(),this.noFill(),t instanceof It?this.texture=t:"string"==typeof t&&(this.texture=new It(t)),this.origin=new T,this._update(),this.translation.set(e||0,i||0),"number"==typeof n&&(this.columns=n),"number"==typeof r&&(this.rows=r),"number"==typeof s&&(this.frameRate=s),this.index=0};O.extend(ge,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(t){ee.MakeObservable(t),O.each(ge.Properties,Rt,t)}}),O.extend(ge.prototype,ee.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,constructor:ge,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=O.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){var e=new ge(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},toObject:function(){var t=ee.prototype.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,i,n,r,s,o,a,l,h=this._texture,c=this._columns,d=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){t=(o=h.image.width)/c,e=(a=h.image.height)/d,n=this._amount,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this._playing&&this._frameRate>0&&(O.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=O.performance.now()-this._startTime,r=1e3*((l=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?i%=r:i=Math.min(i,r),s=x(this._firstFrame,l,i/r),(s=Math.floor(s))!==this._index&&(this._index=s,s>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var u=-t*(this._index%c)+(o-t)/2,f=-e*Math.floor(this._index/c)+(a-e)/2;u!==h.offset.x&&(h.offset.x=u),f!==h.offset.y&&(h.offset.y=f)}return ee.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,ee.prototype.flagReset.call(this),this}}),ge.MakeObservable(ge.prototype);var me=2*Math.PI,ve=Math.PI/2,ye=function(t,e,i,n,r,s,o){for(var a=o||3*W.Resolution,l=[],h=0;h<a;h++)l.push(new z);Bt.call(this,l,!0,!1,!0),this.innerRadius=i,this.outerRadius=n,this.startAngle=r,this.endAngle=s,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};O.extend(ye,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){Bt.MakeObservable(t),O.each(ye.Properties,Rt,t)}}),O.extend(ye.prototype,Bt.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:me,_innerRadius:0,_outerRadius:0,constructor:ye,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t,e=this._startAngle,i=this._endAngle,n=this._innerRadius,r=this._outerRadius,s=k(e,me)===k(i,me),o=n>0,a=this.vertices,l=o?a.length/2:a.length,h=0;s?l--:o||(l-=2);for(var c=0,d=l-1;c<l;c++){var u=c/d,f=a[h],p=u*(i-e)+e,g=(i-e)/l,v=r*Math.cos(p),y=r*Math.sin(p);switch(c){case 0:t=m.move;break;default:t=m.curve}if(f.command=t,f.x=v,f.y=y,f.controls.left.clear(),f.controls.right.clear(),f.command===m.curve){var _=r*g/Math.PI;f.controls.left.x=_*Math.cos(p-ve),f.controls.left.y=_*Math.sin(p-ve),f.controls.right.x=_*Math.cos(p+ve),f.controls.right.y=_*Math.sin(p+ve),1===c&&f.controls.left.multiplyScalar(2),c===d&&f.controls.right.multiplyScalar(2)}h++}if(o){for(s?(a[h].command=m.close,h++):d=--l-1,c=0;c<l;c++)u=c/d,f=a[h],p=(1-u)*(i-e)+e,g=(i-e)/l,v=n*Math.cos(p),y=n*Math.sin(p),t=m.curve,c<=0&&(t=s?m.move:m.line),f.command=t,f.x=v,f.y=y,f.controls.left.clear(),f.controls.right.clear(),f.command===m.curve&&(_=n*g/Math.PI,f.controls.left.x=_*Math.cos(p+ve),f.controls.left.y=_*Math.sin(p+ve),f.controls.right.x=_*Math.cos(p-ve),f.controls.right.y=_*Math.sin(p-ve),1===c&&f.controls.left.multiplyScalar(2),c===d&&f.controls.right.multiplyScalar(2)),h++;a[h].copy(a[0]),a[h].command=m.line}else s||(a[h].command=m.line,a[h].x=0,a[h].y=0,a[++h].copy(a[0]),a[h].command=m.line)}return Bt.prototype._update.call(this),this},flagReset:function(){return Bt.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var e=this.innerRadius,i=this.outerradius,n=this.startAngle,r=this.endAngle,s=this.vertices.length,o=new ye(0,0,e,i,n,r,s);return o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,this.matrix.manual&&o.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){o[t]=this[t]}),this),t&&t.add(o),o},toObject:function(){var t=Bt.prototype.toObject.call(this);return O.each(ye.Properties,(function(e){t[e]=this[e]}),this),t}}),ye.MakeObservable(ye.prototype);var _e=2*Math.PI,be=Math.cos,we=Math.sin,xe=function(t,e,i,n){n=Math.max(n||0,3),Bt.call(this),this.closed=!0,this.automatic=!1,this.width=2*i,this.height=2*i,this.sides=n,this._update(),this.translation.set(t,e)};O.extend(xe,{Properties:["width","height","sides"],MakeObservable:function(t){Bt.MakeObservable(t),O.each(xe.Properties,Rt,t)}}),O.extend(xe.prototype,Bt.prototype,{_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,constructor:xe,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,e=t+1,i=this.vertices.length;i>t&&(this.vertices.splice(t-1,i-t),i=t);for(var n=0;n<e;n++){var r=_e*((n+.5)/t)+Math.PI/2,s=this._width*be(r)/2,o=this._height*we(r)/2;n>=i?this.vertices.push(new z(s,o)):this.vertices[n].set(s,o),this.vertices[n].command=0===n?m.move:m.line}}return Bt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,Bt.prototype.flagReset.call(this),this},clone:function(t){var e=new xe(0,0,this.radius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Bt.prototype.toObject.call(this);return O.each(xe.Properties,(function(e){t[e]=this[e]}),this),t}}),xe.MakeObservable(xe.prototype);var ke=2*Math.PI,Se=Math.cos,Ce=Math.sin,Re=function(t,e,i,n,r){arguments.length<=3&&(i=(n=i)/2),("number"!=typeof r||r<=0)&&(r=5),Bt.call(this),this.closed=!0,this.automatic=!1,this.innerRadius=i,this.outerRadius=n,this.sides=r,this._update(),this.translation.set(t,e)};O.extend(Re,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){Bt.MakeObservable(t),O.each(Re.Properties,Rt,t)}}),O.extend(Re.prototype,Bt.prototype,{_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,constructor:Re,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,e=t+1,i=this.vertices.length;i>t&&(this.vertices.splice(t-1,i-t),i=t);for(var n=0;n<e;n++){var r=ke*((n+.5)/t),s=(n%2?this._outerRadius:this._innerRadius)/2,o=s*Se(r),a=s*Ce(r);n>=i?this.vertices.push(new z(o,a)):this.vertices[n].set(o,a),this.vertices[n].command=0===n?m.move:m.line}}return Bt.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,Bt.prototype.flagReset.call(this),this},clone:function(t){var e=this.innerRadius,i=this.outerRadius,n=this.sides,r=new Re(0,0,e,i,n);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Bt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Bt.prototype.toObject.call(this);return O.each(Re.Properties,(function(e){t[e]=this[e]}),this),t}}),Re.MakeObservable(Re.prototype);var Me={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var i=t,n=document.createElementNS(Me.ns,i);return"svg"===i&&(e=O.defaults(e||{},{version:Me.version})),e&&Object.keys(e).length>0&&Me.setAttributes(n,e),n},setAttributes:function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)/href/.test(i[n])?t.setAttributeNS(Me.xlink,i[n],e[i[n]]):t.setAttribute(i[n],e[i[n]]);return this},removeAttributes:function(t,e){for(var i in e)t.removeAttribute(i);return this},toString:function(t,e){for(var i,n=t.length,r=n-1,s="",o=0;o<n;o++){var a,l,h,c,d,u,f,p,g,v,y,_,b,w,x=t[o],S=e?k(o-1,n):Math.max(o-1,0),R=e?k(o+1,n):Math.min(o+1,r),M=t[S],O=t[R],E=C(x.x),A=C(x.y);switch(x.command){case m.close:a=m.close;break;case m.arc:v=x.rx,y=x.ry,_=x.xAxisRotation,b=x.largeArcFlag,w=x.sweepFlag,a=m.arc+" "+v+" "+y+" "+_+" "+b+" "+w+" "+E+" "+A;break;case m.curve:u=M.controls&&M.controls.right||T.zero,f=x.controls&&x.controls.left||T.zero,M.relative?(l=C(u.x+M.x),h=C(u.y+M.y)):(l=C(u.x),h=C(u.y)),x.relative?(c=C(f.x+x.x),d=C(f.y+x.y)):(c=C(f.x),d=C(f.y)),a=(0===o?m.move:m.curve)+" "+l+" "+h+" "+c+" "+d+" "+E+" "+A;break;case m.move:i=x,a=m.move+" "+E+" "+A;break;default:a=x.command+" "+E+" "+A}o>=r&&e&&(x.command===m.curve&&(O=i,p=x.controls&&x.controls.right||x,g=O.controls&&O.controls.left||O,x.relative?(l=C(p.x+x.x),h=C(p.y+x.y)):(l=C(p.x),h=C(p.y)),O.relative?(c=C(g.x+O.x),d=C(g.y+O.y)):(c=C(g.x),d=C(g.y)),a+=" C "+l+" "+h+" "+c+" "+d+" "+(E=C(O.x))+" "+(A=C(O.y))),x.command!==m.close&&(a+=" Z")),s+=a+" "}return s},getClip:function(t){var e=t._renderer.clip;if(!e){for(var i=t;i.parent;)i=i.parent;e=t._renderer.clip=Me.createElement("clipPath"),i.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var i=e.nodeName;!i||/(radial|linear)gradient/i.test(i)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){Me[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=Me.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,i={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var n=0;n<this.children.length;n++){var r=this.children[n];Me[r._renderer.type].render.call(r,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(Me.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(Me.group.removeChild,i),this._flagOrder&&this.children.forEach(Me.group.orderChild,i),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var i=Me.toString(this._renderer.vertices,this._closed);e.d=i}if(this._fill&&this._fill._renderer&&(this._fill._update(),Me[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Me[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Me.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Me.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var n=Me.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(r)):(n.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=Me.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),Me[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Me[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Me.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Me.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var i=Me.getClip(this),n=this._renderer.elem;this._clip?(n.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(n)):(i.removeAttribute("id"),n.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(n))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var i={};if(this._flagEndPoints&&(i.x1=this.left._x,i.y1=this.left._y,i.x2=this.right._x,i.y2=this.right._y),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?Me.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=Me.createElement("linearGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;if(n)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var s=this.stops[r],o={};s._flagOffset&&(o.offset=100*s._offset+"%"),s._flagColor&&(o["stop-color"]=s._color),s._flagOpacity&&(o["stop-opacity"]=s._opacity),s._renderer.elem?Me.setAttributes(s._renderer.elem,o):s._renderer.elem=Me.createElement("stop",o),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var i={};if(this._flagCenter&&(i.cx=this.center._x,i.cy=this.center._y),this._flagFocal&&(i.fx=this.focal._x,i.fy=this.focal._y),this._flagRadius&&(i.r=this._radius),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?Me.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=Me.createElement("radialGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;if(n)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var s=this.stops[r],o={};s._flagOffset&&(o.offset=100*s._offset+"%"),s._flagColor&&(o["stop-color"]=s._color),s._flagOpacity&&(o["stop-opacity"]=s._opacity),s._renderer.elem?Me.setAttributes(s._renderer.elem,o):s._renderer.elem=Me.createElement("stop",o),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var i={},n={x:0,y:0},r=this.image;if(this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":n.href=n["xlink:href"]=r.toDataURL("image/png");break;case"img":case"image":n.href=n["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(i.x=this._offset.x,i.y=this._offset.y,r&&(i.x-=r.width/2,i.y-=r.height/2,this._scale instanceof T?(i.x*=this._scale.x,i.y*=this._scale.y):(i.x*=this._scale,i.y*=this._scale)),i.x>0&&(i.x*=-1),i.y>0&&(i.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(i.width=0,i.height=0,r)){switch(n.width=i.width=r.width,n.height=i.height=r.height,this._repeat){case"no-repeat":i.width+=1,i.height+=1}this._scale instanceof T?(i.width*=this._scale.x,i.height*=this._scale.y):(i.width*=this._scale,i.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?Me.setAttributes(this._renderer.image,n):this._renderer.image=Me.createElement("image",n)),this._renderer.elem?0!==Object.keys(i).length&&Me.setAttributes(this._renderer.elem,i):(i.id=this.id,i.patternUnits="userSpaceOnUse",this._renderer.elem=Me.createElement("pattern",i),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},Oe=function(t){this.domElement=t.domElement||Me.createElement("svg"),this.scene=new lt,this.scene.parent=this,this.defs=Me.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};O.extend(Oe,{Utils:Me}),O.extend(Oe.prototype,A,{constructor:Oe,setSize:function(t,e){return this.width=t,this.height=e,Me.setAttributes(this.domElement,{width:t,height:e}),this.trigger(A.Types.resize,t,e)},render:function(){return Me.group.render.call(this.scene,this.domElement),this}});var Ee=N.Multiply,Ae=[1,0,0,0,1,0,0,0,1],Te=new S(9),Pe=wt.Utils,Fe={isHidden:/(undefined|none|transparent)/i,canvas:y.document?y.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new N,group:{removeChild:function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)Fe.group.removeChild(t.children[i],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},render:function(t,e){this._update();var i,n=this.parent,r=n._matrix&&n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix;if((r||s)&&(this._renderer.matrix||(this._renderer.matrix=new S(9)),this._matrix.toTransformArray(!0,Te),Ee(Te,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof T||(this._renderer.scale=new T),this._scale instanceof T?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(n._renderer.type)||(this._renderer.scale.x*=n._renderer.scale.x,this._renderer.scale.y*=n._renderer.scale.y),r&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Fe[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),this._flagSubtractions)for(i=0;i<this.subtractions.length;i++)Fe.group.removeChild(this.subtractions[i],t);for(i=0;i<this.children.length;i++){var o=this.children[i];Fe[o._renderer.type].render.call(o,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t){var e,i,n,r,s,o,a,l,h,c,d,u,f,p,g,v=t._renderer.vertices,y=this.canvas,_=this.ctx,b=t._renderer.scale,w=t._stroke,x=t._linewidth,S=t._fill,C=t._renderer.opacity||t._opacity,R=t._cap,M=t._join,O=t._miter,E=t._closed,A=t.dashes,P=v.length,F=P-1;y.width=Math.max(Math.ceil(t._renderer.rect.width*b.x),1),y.height=Math.max(Math.ceil(t._renderer.rect.height*b.y),1);var I,z=t._renderer.rect.centroid,j=z.x,D=z.y;_.clearRect(0,0,y.width,y.height),S&&("string"==typeof S?_.fillStyle=S:(Fe[S._renderer.type].render.call(S,_,t),_.fillStyle=S._renderer.effect)),w&&("string"==typeof w?_.strokeStyle=w:(Fe[w._renderer.type].render.call(w,_,t),_.strokeStyle=w._renderer.effect),x&&(_.lineWidth=x),O&&(_.miterLimit=O),M&&(_.lineJoin=M),!E&&R&&(_.lineCap=R)),"number"==typeof C&&(_.globalAlpha=C),A&&A.length>0&&(_.lineDashOffset=A.offset||0,_.setLineDash(A)),_.save(),_.scale(b.x,b.y),_.translate(j,D),_.beginPath();for(var L=0;L<v.length;L++){var B=v[L];switch(f=B.x,p=B.y,B.command){case m.close:_.closePath();break;case m.arc:var V=B.rx,N=B.ry,U=B.xAxisRotation,W=B.largeArcFlag,H=B.sweepFlag,q=(n=v[i=E?k(L-1,P):Math.max(L-1,0)]).x,G=n.y;Pe.renderSvgArcCommand(_,q,G,V,N,W,H,U,f,p);break;case m.curve:i=E?k(L-1,P):Math.max(L-1,0),e=E?k(L+1,P):Math.min(L+1,F),n=v[i],r=v[e],h=n.controls&&n.controls.right||T.zero,c=B.controls&&B.controls.left||T.zero,n._relative?(a=h.x+n.x,l=h.y+n.y):(a=h.x,l=h.y),B._relative?(s=c.x+B.x,o=c.y+B.y):(s=c.x,o=c.y),_.bezierCurveTo(a,l,s,o,f,p),L>=F&&E&&(r=I,d=B.controls&&B.controls.right||T.zero,u=r.controls&&r.controls.left||T.zero,B._relative?(a=d.x+B.x,l=d.y+B.y):(a=d.x,l=d.y),r._relative?(s=u.x+r.x,o=u.y+r.y):(s=u.x,o=u.y),f=r.x,p=r.y,_.bezierCurveTo(a,l,s,o,f,p));break;case m.line:_.lineTo(f,p);break;case m.move:I=B,_.moveTo(f,p)}}E&&_.closePath(),Fe.isHidden.test(S)||((g=S._renderer&&S._renderer.offset)&&(_.save(),_.translate(-S._renderer.offset.x,-S._renderer.offset.y),_.scale(S._renderer.scale.x,S._renderer.scale.y)),_.fill(),g&&_.restore()),Fe.isHidden.test(w)||((g=w._renderer&&w._renderer.offset)&&(_.save(),_.translate(-w._renderer.offset.x,-w._renderer.offset.y),_.scale(w._renderer.scale.x,w._renderer.scale.y),_.lineWidth=x/w._renderer.scale.x),_.stroke(),g&&_.restore()),_.restore()},getBoundingClientRect:function(t,e,i){var n,r,s=1/0,o=-1/0,a=1/0,l=-1/0;t.forEach((function(t){var e,i,n,r,h,c,d=t.x,u=t.y,f=t.controls;a=Math.min(u,a),s=Math.min(d,s),o=Math.max(d,o),l=Math.max(u,l),t.controls&&(h=f.left,c=f.right,h&&c&&(e=t._relative?h.x+d:h.x,i=t._relative?h.y+u:h.y,n=t._relative?c.x+d:c.x,r=t._relative?c.y+u:c.y,e&&i&&n&&r&&(a=Math.min(i,r,a),s=Math.min(e,n,s),o=Math.max(e,n,o),l=Math.max(i,r,l))))})),"number"==typeof e&&(a-=e,s-=e,o+=e,l+=e),n=o-s,r=l-a,i.top=a,i.left=s,i.right=o,i.bottom=l,i.width=n,i.height=r,i.centroid||(i.centroid={}),i.centroid.x=-s,i.centroid.y=-a},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var n=i||this.parent,r=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,o=this._renderer.parent!==n,a=this._flagVertices||this._flagFill||this._fill instanceof At&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Pt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof It&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof At&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Pt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof It&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||s||o)&&(this._renderer.matrix||(this._renderer.matrix=new S(9)),this._matrix.toTransformArray(!0,Te),Ee(Te,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof T||(this._renderer.scale=new T),this._scale instanceof T?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),o&&(this._renderer.parent=n)),a?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*n._renderer.opacity,Fe.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Fe.updateTexture.call(Fe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||i){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},text:{updateCanvas:function(t){var e=this.canvas,i=this.ctx,n=t._renderer.scale,r=t._stroke,s=t._linewidth*n,o=t._fill,a=t._renderer.opacity||t._opacity,l=t.dashes,h=t._decoration;Pe.alignments[t._alignment]||t._alignment,t._baseline,e.width=Math.max(Math.ceil(t._renderer.rect.width*n.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*n.y),1);var c,d,u,f,p,g,m,v,y,_,b,w=t._renderer.rect.centroid,x=w.x,k=w.y,S=o._renderer&&o._renderer.offset&&r._renderer&&r._renderer.offset;if(i.clearRect(0,0,e.width,e.height),S||(i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),i.textAlign="center",i.textBaseline="middle",o&&("string"==typeof o?i.fillStyle=o:(Fe[o._renderer.type].render.call(o,i,t),i.fillStyle=o._renderer.effect)),r&&("string"==typeof r?i.strokeStyle=r:(Fe[r._renderer.type].render.call(r,i,t),i.strokeStyle=r._renderer.effect),s&&(i.lineWidth=s)),"number"==typeof a&&(i.globalAlpha=a),l&&l.length>0&&(i.lineDashOffset=l.offset||0,i.setLineDash(l)),i.save(),i.scale(n.x,n.y),i.translate(x,k),Fe.isHidden.test(o)||(o._renderer&&o._renderer.offset?(g=o._renderer.scale.x,m=o._renderer.scale.y,i.save(),i.translate(-o._renderer.offset.x,-o._renderer.offset.y),i.scale(g,m),c=t._size/o._renderer.scale.y,d=t._leading/o._renderer.scale.y,i.font=[t._style,t._weight,c+"px/",d+"px",t._family].join(" "),u=o._renderer.offset.x/o._renderer.scale.x,f=o._renderer.offset.y/o._renderer.scale.y,i.fillText(t.value,u,f),i.restore()):i.fillText(t.value,0,0)),Fe.isHidden.test(r)||(r._renderer&&r._renderer.offset?(g=r._renderer.scale.x,m=r._renderer.scale.y,i.save(),i.translate(-r._renderer.offset.x,-r._renderer.offset.y),i.scale(g,m),c=t._size/r._renderer.scale.y,d=t._leading/r._renderer.scale.y,i.font=[t._style,t._weight,c+"px/",d+"px",t._family].join(" "),u=r._renderer.offset.x/r._renderer.scale.x,f=r._renderer.offset.y/r._renderer.scale.y,p=s/r._renderer.scale.x,i.lineWidth=p,i.strokeText(t.value,u,f),i.restore()):i.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(h)){var C=i.measureText(t.value);switch(h){case"underline":y=C.actualBoundingBoxAscent,b=C.actualBoundingBoxAscent;break;case"strikethrough":y=0,b=0}v=-C.width/2,_=C.width/2,i.lineWidth=Math.max(Math.floor(t._size/15),1),i.strokeStyle=i.fillStyle,i.beginPath(),i.moveTo(v,y),i.lineTo(_,b),i.stroke()}i.restore()},getBoundingClientRect:function(t,e){var i=Fe.ctx;i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),i.textAlign="center",i.textBaseline=t._baseline;var n=1.25*i.measureText(t._value).width,r=1.25*Math.max(t._size,t._leading);this._linewidth&&!Fe.isHidden.test(this._stroke)&&(n+=2*this._linewidth,r+=2*this._linewidth);var s=n/2,o=r/2;switch(Fe.alignments[t._alignment]||t._alignment){case Fe.alignments.left:e.left=0,e.right=n;break;case Fe.alignments.right:e.left=-n,e.right=0;break;default:e.left=-s,e.right=s}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-o,e.bottom=o}e.width=n,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=s,e.centroid.y=o},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var n=i||this.parent,r=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,o=this._renderer.parent!==n,a=this._flagVertices||this._flagFill||this._fill instanceof At&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Pt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof It&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof At&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Pt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof It&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||s||o)&&(this._renderer.matrix||(this._renderer.matrix=new S(9)),this._matrix.toTransformArray(!0,Te),Ee(Te,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof T||(this._renderer.scale=new T),this._scale instanceof T?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),o&&(this._renderer.parent=n)),a?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*n._renderer.opacity,Fe.text.getBoundingClientRect(this,this._renderer.rect),Fe.updateTexture.call(Fe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||i){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var i=0;i<this.stops.length;i++){var n=this.stops[i];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var i=0;i<this.stops.length;i++){var n=this.stops[i];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(t.canvas.getContext("2d")){this._update();var i=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(i,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof T||(this._renderer.offset=new T),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof T?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof T||(this._renderer.scale=new T),this._scale instanceof T?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(Fe,e),e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,e){var i,n;if(i=t.createProgram(),O.each(e,(function(e){t.attachShader(i,e)})),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw n=t.getProgramInfoLog(i),t.deleteProgram(i),new Ct("unable to link program: "+n);return i}},shaders:{create:function(t,e,i){var n,r;if(n=t.createShader(t[i]),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(n),t.deleteShader(n),new Ct("unable to compile shader "+n+": "+r);return n},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new Mt};Fe.ctx=Fe.canvas.getContext("2d");var Ie=function(t){var e,i,n;if(this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(Fe.canvas=t.offscreenElement,Fe.ctx=Fe.canvas.getContext("2d")),this.scene=new lt,this.scene.parent=this,this._renderer={type:"renderer",matrix:new S(Ae),scale:1,opacity:1},this._flagMatrix=!0,t=O.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new Ct("unable to create a webgl context. Try using another renderer.");i=Fe.shaders.create(e,Fe.shaders.vertex,Fe.shaders.types.vertex),n=Fe.shaders.create(e,Fe.shaders.fragment,Fe.shaders.types.fragment),this.program=Fe.program.create(e,[i,n]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.rect=e.getUniformLocation(this.program,"u_rect");var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(this.program.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.program.position),e.bufferData(e.ARRAY_BUFFER,new S([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)};O.extend(Ie,{Utils:Fe}),O.extend(Ie.prototype,A,{constructor:Ie,setSize:function(t,e,i){this.width=t,this.height=e,this.ratio=void 0===i?it(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,O.isObject(this.domElement.style)&&O.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,e*this.ratio);var n=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(n,t*this.ratio,e*this.ratio),this.trigger(A.Types.resize,t,e,i)},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),Fe.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}});var ze=function(t){var e=O.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:ze.Types.svg,autostart:!1});if(O.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),O.isElement(e.domElement)){var i=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+i)||(this.type=ze.Types[i])}this.renderer=new ze[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=je.bind(this),this.fit.domElement=window,this.fit.attached=!0,O.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),O.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),St.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=De.bind(this),O.extend(this.renderer.domElement.style,{display:"block"})):O.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(A.Types.resize,Le.bind(this)),this.scene=this.renderer.scene,ze.Instances.push(this),e.autostart&&Be.init()};function je(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,i=this.height=t.height;this.renderer.setSize(e,i,this.ratio)}function De(){var t=this.renderer.domElement.parentElement;if(t){var e=t.getBoundingClientRect(),i=this.width=e.width,n=this.height=e.height;this.renderer.setSize(i,n,this.ratio)}else console.warn("Two.js: Attempting to fit to parent, but no parent found.")}function Le(t,e){this.width=t,this.height=e,this.trigger(A.Types.resize,t,e)}O.extend(ze,W),O.extend(ze.prototype,A,{constructor:ze,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,Be.init(),this.trigger(A.Types.play)},pause:function(){return this.playing=!1,this.trigger(A.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,i,n;if(O.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(i=t.vertices[e]).unbind&&i.unbind();if(t.children)for(e=0;e<t.children.length;e++)n=t.children[e],this.release(n);return t}},update:function(){var t=!!this._lastFrame,e=O.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&!this.fit.attached&&(St.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var i=this.width,n=this.height,r=this.renderer;return i===r.width&&n===r.height||r.setSize(i,n,this.ratio),this.trigger(A.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(A.Types.render,this.frameCount++)},add:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(t,e,i,n){var r=new te(t,e,i,n);return this.scene.add(r),r},makeArrow:function(t,e,i,n,r){var s="number"==typeof r?r:10,o=Math.atan2(n-e,i-t),a=[new z(t,e,void 0,void 0,void 0,void 0,m.move),new z(i,n,void 0,void 0,void 0,void 0,m.line),new z(i-s*Math.cos(o-Math.PI/4),n-s*Math.sin(o-Math.PI/4),void 0,void 0,void 0,void 0,m.line),new z(i,n,void 0,void 0,void 0,void 0,m.move),new z(i-s*Math.cos(o+Math.PI/4),n-s*Math.sin(o+Math.PI/4),void 0,void 0,void 0,void 0,m.line)],l=new Bt(a,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l},makeRectangle:function(t,e,i,n){var r=new ee(t,e,i,n);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,i,n,r){var s=new ie(t,e,i,n,r);return this.scene.add(s),s},makeCircle:function(t,e,i,n){var r=new Yt(t,e,i,n);return this.scene.add(r),r},makeEllipse:function(t,e,i,n,r){var s=new Qt(t,e,i,n,r);return this.scene.add(s),s},makeStar:function(t,e,i,n,r){var s=new Re(t,e,i,n,r);return this.scene.add(s),s},makeCurve:function(t){var e=arguments.length,i=t;if(!Array.isArray(t)){i=[];for(var n=0;n<e;n+=2){var r=arguments[n];if("number"!=typeof r)break;var s=arguments[n+1];i.push(new z(r,s))}}var o=arguments[e-1],a=new Bt(i,!("boolean"==typeof o?o:void 0),!0),l=a.getBoundingClientRect();return a.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(a),a},makePolygon:function(t,e,i,n){var r=new xe(t,e,i,n);return this.scene.add(r),r},makeArcSegment:function(t,e,i,n,r,s,o){var a=new ye(t,e,i,n,r,s,o);return this.scene.add(a),a},makePath:function(t){var e=arguments.length,i=t;if(!Array.isArray(t)){i=[];for(var n=0;n<e;n+=2){var r=arguments[n];if("number"!=typeof r)break;var s=arguments[n+1];i.push(new z(r,s))}}var o=arguments[e-1],a=new Bt(i,!("boolean"==typeof o?o:void 0)),l=a.getBoundingClientRect();return"number"==typeof l.top&&"number"==typeof l.left&&"number"==typeof l.right&&"number"==typeof l.bottom&&a.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(a),a},makeText:function(t,e,i,n){var r=new ne(t,e,i,n);return this.add(r),r},makeLinearGradient:function(t,e,i,n){var r=Array.prototype.slice.call(arguments,4),s=new At(t,e,i,n,r);return this.add(s),s},makeRadialGradient:function(t,e,i){var n=Array.prototype.slice.call(arguments,3),r=new Pt(t,e,i,n);return this.add(r),r},makeSprite:function(t,e,i,n,r,s,o){var a=new ge(t,e,i,n,r,s);return o&&a.play(),this.add(a),a},makeImageSequence:function(t,e,i,n,r){var s=new pe(t,e,i,n);return r&&s.play(),this.add(s),s},makeTexture:function(t,e){return new It(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=Array.prototype.slice.call(arguments));var i=new lt;return this.scene.add(i),i.add(e),i},interpret:function(t,e,i){var n=t.tagName.toLowerCase();if(i=void 0===i||i,!(n in ue))return null;var r=ue[n].call(this,t);return i?this.add(e&&r instanceof lt?r.children:r):r.parent&&r.remove(),r},load:function(t,e){var i,n,r,s=new lt,o=function(t){for(St.temp.innerHTML=t,n=0;n<St.temp.children.length;n++)if(i=St.temp.children[n],/svg/i.test(i.nodeName))for(r=0;r<i.children.length;r++)s.add(this.interpret(i.children[r]));else s.add(this.interpret(i));if("function"==typeof e){var o=St.temp.children.length<=1?St.temp.children[0]:St.temp.children;e(s,o)}}.bind(this);return/.*\.svg/gi.test(t)?(fe(t,o),s):(o(t),s)}});var Be=St.getRequestAnimationFrame();function Ve(){for(var t=0;t<ze.Instances.length;t++){var e=ze.Instances[t];e.playing&&e.update()}ze.nextFrameID=Be(Ve)}Be.init=function(){Ve(),Be.init=function(){}},O.extend(ze,{Anchor:z,Collection:nt,Events:A,Group:lt,Matrix:N,Path:Bt,Registry:Mt,Shape:rt,Text:ne,Vector:T,Gradient:Et,ImageSequence:pe,LinearGradient:At,RadialGradient:Pt,Sprite:ge,Stop:Ot,Texture:It,ArcSegment:ye,Circle:Yt,Ellipse:Qt,Line:te,Polygon:xe,Rectangle:ee,RoundedRectangle:ie,Star:Re,CanvasRenderer:wt,SVGRenderer:Oe,WebGLRenderer:Ie,Commands:m,Utils:O.extend({Error:Ct,getRatio:it,defineGetterSetter:Rt,read:ue,xhr:fe},O,kt,tt,R)});const Ne=ze;var Ue=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},We=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),He=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var i=this;i.length<t;)i=e+i;return i};var qe={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function Ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return i||"0"}var Xe=function(){function t(e,i,n,r){Ue(this,t);var s=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===n){var o=e&&""+e;o&&function(e){if(e.startsWith("hsl")){var i=e.match(/([\-\d\.e]+)/g).map(Number),n=He(i,4),r=n[0],o=n[1],a=n[2],l=n[3];void 0===l&&(l=1),r/=360,o/=100,a/=100,s.hsla=[r,o,a,l]}else if(e.startsWith("rgb")){var h=e.match(/([\-\d\.e]+)/g).map(Number),c=He(h,4),d=c[0],u=c[1],f=c[2],p=c[3];void 0===p&&(p=1),s.rgba=[d,u,f,p]}else e.startsWith("#")?s.rgba=t.hexToRgb(e):s.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(o.toLowerCase())}else this.rgba=[e,i,n,void 0===r?1:r]}return We(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return Ge(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],i=["","%","%",""],n=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,n){return Ge(t*e[n],3===n?3:1)+i[n]}));return t?"hsla("+n+")":"hsl("+n+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var i=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(e){var i=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),n=qe[i];return void 0===n?n:t.hexToRgb(n.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=He(t,4),i=e[0],n=e[1],r=e[2],s=e[3];i/=255,n/=255,r/=255;var o=Math.max(i,n,r),a=Math.min(i,n,r),l=void 0,h=void 0,c=(o+a)/2;if(o===a)l=h=0;else{var d=o-a;switch(h=c>.5?d/(2-o-a):d/(o+a),o){case i:l=(n-r)/d+(n<r?6:0);break;case n:l=(r-i)/d+2;break;case r:l=(i-n)/d+4}l/=6}return[l,h,c,s]}},{key:"hslToRgb",value:function(t){var e=He(t,4),i=e[0],n=e[1],r=e[2],s=e[3],o=void 0,a=void 0,l=void 0;if(0===n)o=a=l=r;else{var h=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},c=r<.5?r*(1+n):r+n-r*n,d=2*r-c;o=h(d,c,i+1/3),a=h(d,c,i),l=h(d,c,i-1/3)}var u=[255*o,255*a,255*l].map(Math.round);return u[3]=s,u}}]),t}(),Ye=function(){function t(){Ue(this,t),this._events=[]}return We(t,[{key:"add",value:function(t,e,i){t.addEventListener(e,i,!1),this._events.push({target:t,type:e,handler:i})}},{key:"remove",value:function(e,i,n){this._events=this._events.filter((function(r){var s=!0;return e&&e!==r.target&&(s=!1),i&&i!==r.type&&(s=!1),n&&n!==r.handler&&(s=!1),s&&t._doRemove(r.target,r.type,r.handler),!s}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,i){t.removeEventListener(e,i,!1)}}]),t}();function Ze(t,e,i){var n=!1;function r(t,e,i){return Math.max(e,Math.min(t,i))}function s(t,s,o){if(o&&(n=!0),n){t.preventDefault();var a=e.getBoundingClientRect(),l=a.width,h=a.height,c=s.clientX,d=s.clientY,u=r(c-a.left,0,l),f=r(d-a.top,0,h);i(u/l,f/h)}}function o(t,e){1===(void 0===t.buttons?t.which:t.buttons)?s(t,t,e):n=!1}function a(t,e){1===t.touches.length?s(t,t.touches[0],e):n=!1}t.add(e,"mousedown",(function(t){o(t,!0)})),t.add(e,"touchstart",(function(t){a(t,!0)})),t.add(window,"mousemove",o),t.add(e,"touchmove",a),t.add(window,"mouseup",(function(t){n=!1})),t.add(e,"touchend",(function(t){n=!1})),t.add(e,"touchcancel",(function(t){n=!1}))}var Ke="keydown",$e="mousedown",Je="focusin";function Qe(t,e){return(e||document).querySelector(t)}function ti(t){t.preventDefault(),t.stopPropagation()}function ei(t,e,i,n,r){t.add(e,Ke,(function(t){i.indexOf(t.key)>=0&&(r&&ti(t),n(t))}))}var ii=document.createElement("style");ii.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(ii);const ni=function(){function t(e){Ue(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new Ye,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return We(t,[{key:"setOptions",value:function(t){var e=this;if(t){var i=this.settings;if(t instanceof HTMLElement)i.parent=t;else{i.parent&&t.parent&&i.parent!==t.parent&&(this._events.remove(i.parent),this._popupInited=!1),function(t,e,i){for(var n in t)e[n]=t[n]}(t,i),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var n=t.color||t.colour;n&&this._setColor(n)}var r=i.parent;if(r&&i.popup&&!this._popupInited){var s=function(t){return e.openHandler(t)};this._events.add(r,"click",s),ei(this._events,r,[" ","Spacebar","Enter"],s),this._popupInited=!0}else t.parent&&!i.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===Ke?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,i=!1;if(t)if(e===$e||e===Je){var n=(this.__containedEvent||0)+100;t.timeStamp>n&&(i=!0)}else ti(t),i=!0;else i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==$e&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var i=void 0;try{i=new Xe(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var n=i.hsla;n[3]=1,i.hsla=n}this.colour=this.color=i,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,i,n=(e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',(i=document.createElement("div")).innerHTML=e,i.firstElementChild);return this.domElement=n,this._domH=Qe(".picker_hue",n),this._domSL=Qe(".picker_sl",n),this._domA=Qe(".picker_alpha",n),this._domEdit=Qe(".picker_editor input",n),this._domSample=Qe(".picker_sample",n),this._domOkay=Qe(".picker_done button",n),this._domCancel=Qe(".picker_cancel button",n),n.classList.add("layout_"+this.settings.layout),this.settings.alpha||n.classList.add("no_alpha"),this.settings.editor||n.classList.add("no_editor"),this.settings.cancelButton||n.classList.add("no_cancel"),this._ifPopup((function(){return n.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,i=this.domElement,n=this._events;function r(t,e,i){n.add(t,e,i)}r(i,"click",(function(t){return t.preventDefault()})),Ze(n,this._domH,(function(t,i){return e._setHSLA(t)})),Ze(n,this._domSL,(function(t,i){return e._setHSLA(null,t,1-i)})),this.settings.alpha&&Ze(n,this._domA,(function(t,i){return e._setHSLA(null,null,null,1-i)}));var s=this._domEdit;r(s,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),r(s,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};r(window,$e,e),r(window,Je,e),ei(n,i,["Esc","Escape"],e);var s=function(e){t.__containedEvent=e.timeStamp};r(i,$e,s),r(i,Je,s),r(t._domCancel,"click",e)}));var o=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};r(this._domOkay,"click",o),ei(n,i,["Enter"],o)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(i){"static"===getComputedStyle(t).position&&(t.style.position="relative");var n=!0===i?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===n?e.classList.add(t):e.classList.remove(t)})),e.classList.add(n)}))}},{key:"_setHSLA",value:function(t,e,i,n,r){r=r||{};var s=this.colour,o=s.hsla;[t,e,i,n].forEach((function(t,e){(t||0===t)&&(o[e]=t)})),s.hsla=o,this._updateUI(r),this.onChange&&!r.silent&&this.onChange(s)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,i=e.hsla,n="hsl("+360*i[0]+", 100%, 50%)",r=e.hslString,s=e.hslaString,o=this._domH,a=this._domSL,l=this._domA,h=Qe(".picker_selector",o),c=Qe(".picker_selector",a),d=Qe(".picker_selector",l);y(0,h,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=n,y(0,c,i[1]),_(0,c,1-i[2]),a.style.color=r,_(0,d,1-i[3]);var u=r,f=u.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[u,f]+")";if(this._domA.style.backgroundImage=p+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.editorFormat,m=this.settings.alpha,v=void 0;switch(g){case"rgb":v=e.printRGB(m);break;case"hsl":v=e.printHSL(m);break;default:v=e.printHex(m)}this._domEdit.value=v}this._domSample.style.color=s}function y(t,e,i){e.style.left=100*i+"%"}function _(t,e,i){e.style.top=100*i+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var i=t?"":"none",n=e.style.display!==i;return n&&(e.style.display=i),n}}],[{key:"StyleElement",get:function(){return ii}}]),t}(),ri=[{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"select",input:!0,key:"imageType",label:"Image Type",tooltip:"Element used to display background image",weight:20,defaultValue:"image",dataSrc:"values",data:{values:[{label:"Image",value:"image"},{label:"SVG",value:"svg"}]}},{type:"textfield",label:"Width",input:!0,key:"width",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"textfield",label:"Height",input:!0,key:"height",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"checkbox",label:"Set Size Automatically",input:!0,key:"autoSize",tooltip:"Background image will fill the available width. Uncheck this if you want to specify width/height manually.",weight:20},{type:"textfield",label:"Default Zoom",input:!0,key:"defaultZoom",placeholder:"100",weight:20},{type:"textfield",label:"Default Stroke Color",description:"Start with # sign",input:!0,key:"defaultStroke",placeholder:"#333",weight:20},{type:"textfield",label:"Default Fill Color",description:"Start with # sign",input:!0,key:"defaultFill",placeholder:"#ccc",weight:20},{type:"number",label:"Default Line Width",input:!0,key:"defaultLineWidth",placeholder:"1",weight:20},{type:"number",label:"Default Circle Size",input:!0,key:"defaultCircleSize",placeholder:"10",weight:20},{key:"placeholder",ignore:!0}],si=[{key:"unique",ignore:!0}],oi=[{key:"multiple",ignore:!0}];var ai=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},li=n.Components.components.component.editForm;function hi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return li.apply(void 0,ai([[{key:"display",components:ri},{key:"validation",components:si},{key:"data",components:oi}]],t))}function ci(t){var e=this;return{pencil:{state:{mode:"pencil"},eventStart:function(i){e.points=[i],e.prev=i,e.curve=e.two.makeCurve([new t.Vector(e.prev.x,e.prev.y),new t.Vector(i.x,i.y+1)],!0),e.curve.noFill().stroke=e.state.stroke,e.curve.linewidth=e.state.linewidth,e.curve.vertices.forEach((function(t){return t.addSelf(e.curve.translation)})),e.curve.translation.clear(),e.two.update(),e.layers.push(e.curve)},drag:function(i){e.points.push(i),e.curve.vertices.push(new t.Vector(i.x,i.y)),e.two.update(),e.prev=i},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{points:e.points})),e.dataValue=t,e.triggerChange()},draw:function(i){var n=e.two.makeCurve(i.points.map((function(e){return new t.Vector(e.x,e.y)})),!0);return n.noFill().stroke=i.stroke,n.linewidth=i.linewidth,n.vertices.forEach((function(t){return t.addSelf(n.translation)})),n.translation.clear(),n}},line:{state:{mode:"line"},eventStart:function(t){e.center=t,e.line=e.two.makeLine(t.x,t.y,t.x,t.y),e.line.fill=e.state.fill,e.line.stroke=e.state.stroke,e.line.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.line),e.layers.length},drag:function(t){e.line.vertices[1].x=t.x,e.line.vertices[1].y=t.y,e.two.update()},eventEnd:function(){var t=e.dataValue.slice(),i=e.line.vertices.map((function(t){return{x:t.x,y:t.y}}));t.push(Object.assign({},e.state,{vertices:i})),e.dataValue=t,e.triggerChange()},draw:function(t){var i=e.two.makeLine(t.vertices[0].x,t.vertices[0].y,t.vertices[1].x,t.vertices[1].y);return i.fill=t.fill,i.stroke=t.stroke,i.linewidth=t.linewidth,i}},circle:{state:{mode:"circle"},eventStart:function(t){e.center=t;var i=e.two.makeCircle(t.x,t.y,e.state.circleSize);i.fill=e.state.fill,i.stroke=e.state.stroke,i.linewidth=e.state.linewidth,e.two.update(),e.layers.push(i)},drag:function(){},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{center:e.center})),e.dataValue=t,e.triggerChange()},draw:function(t){var i=e.two.makeCircle(t.center.x,t.center.y,t.circleSize);return i.fill=t.fill,i.stroke=t.stroke,i.linewidth=t.linewidth,i}},rectangle:{cursor:{hover:"crosshair"},state:{mode:"rectangle"},eventStart:function(t){e.dragStartPoint=t},drag:function(t){e.dragEndPoint=t,e.rectangle&&e.rectangle.remove(),e.width=Math.abs(e.dragEndPoint.x-e.dragStartPoint.x),e.height=Math.abs(e.dragEndPoint.y-e.dragStartPoint.y),e.center={x:Math.min(e.dragStartPoint.x,e.dragEndPoint.x)+e.width/2,y:Math.min(e.dragStartPoint.y,e.dragEndPoint.y)+e.height/2},e.rectangle=e.two.makeRectangle(e.center.x,e.center.y,e.width,e.height),e.rectangle.fill=e.state.fill,e.rectangle.stroke=e.state.stroke,e.rectangle.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.rectangle)},eventEnd:function(){var t=e.dataValue.slice();delete e.rectangle;var i={center:e.center,width:e.width,height:e.height};t.push(Object.assign({},e.state,i)),e.dataValue=t,e.triggerChange()},draw:function(t){var i=e.two.makeRectangle(t.center.x,t.center.y,t.width,t.height);return i.fill=t.fill,i.stroke=t.stroke,i.linewidth=t.linewidth,i}},zoomIn:{cursor:{hover:"zoom-in"},state:{mode:"zoomIn"},eventStart:function(t){return e.zoom(t,e.zoomInfo.multiplier)}},zoomOut:{cursor:{hover:"zoom-out"},state:{mode:"zoomOut"},eventStart:function(t){return e.zoom(t,1/e.zoomInfo.multiplier)}},dragImage:{cursor:{hover:"grab",clicked:"grabbing"},state:{mode:"dragImage"},eventStart:function(t){return e.dragStartPoint=t},drag:function(t){e.dragLastPoint||(e.dragLastPoint=e.dragStartPoint);var i={x:Math.round(t.x-e.dragStartPoint.x),y:Math.round(t.y-e.dragStartPoint.y)};0===i.x&&0===i.y||(e.dragImage(i),e.dragLastPoint=t)}}}}const di={modes:[{title:"Pencil",key:"pencil",icon:"fa fa-pencil"},{title:"Line",key:"line",icon:"fa fa-minus"},{title:"Circle",key:"circle",icon:"fa fa-circle",input:{type:"number",class:"formio-sketchpad-radius-input",attributes:{min:0}}},{title:"Rectangle",key:"rectangle",icon:"fa fa-square-o"},{title:"Zoom In",key:"zoomIn",icon:"fa fa-search-plus"},{title:"Zoom Out",key:"zoomOut",icon:"fa fa-search-minus"},{title:"Drag Zoomed Image",key:"dragImage",icon:"fa fa-hand-paper-o"}],styles:[{title:"Stroke Color",key:"stroke",icon:"fa fa-square-o"},{title:"Fill Color",key:"fill",icon:"fa fa-square"},{title:"Line Width",key:"width",icon:"fa fa-minus",input:{type:"number",class:"formio-sketchpad-linewidth-input",attributes:{min:0,max:250}}}],actions:[{title:"Undo",key:"undo",icon:"fa fa-undo"},{title:"Redo",key:"redo",icon:"fa fa-repeat"},{title:"Reset Zoom",key:"resetZoom",icon:"fa fa-search"},{title:"Clear All",key:"clearAll",icon:"fa fa-ban"}]};var ui=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fi=function(){return(fi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},pi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},gi=n.Components.components.field;const mi=function(t){function e(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=t.apply(this,i)||this;return r.dimensionsCorrection=1,r.imageType=r.component.imageType,r.modes=ci.call(r,Ne),r.state={mode:Object.keys(r.modes)[0],stroke:r.component.defaultStroke||e.defaultStroke,fill:r.component.defaultFill||e.defaultFill,linewidth:r.component.defaultLineWidth||e.defaultLineWidth,circleSize:r.component.defaultCircleSize||e.defaultCircleSize},r.dimensionsMultiplier=1,r.zoomInfo={viewBox:{},canvasViewBox:{},multiplier:1.5,totalMultiplier:1},r.deleted=[],r.layers=[],r}return ui(e,t),Object.defineProperty(e,"defaultFill",{get:function(){return"#ccc"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultStroke",{get:function(){return"#333"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultLineWidth",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultCircleSize",{get:function(){return 10},enumerable:!1,configurable:!0}),e.schema=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gi.schema.apply(gi,pi([{type:"sketchpad",label:"Sketchpad",key:"sketchpad",input:!0,multiple:!0,modalEdit:!0,imageType:"image",autoSize:!0,defaultZoom:100,defaultStroke:e.defaultStroke,defaultFill:e.defaultFill,defaultLineWidth:e.defaultLineWidth,defaultCircleSize:e.defaultCircleSize}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Sketchpad",group:"premium",icon:"image",weight:110,documentation:"http://help.form.io/userguide/",schema:e.schema()}},enumerable:!1,configurable:!0}),e.prototype.render=function(){return t.prototype.render.call(this,this.renderTemplate(this.templateName,fi({},this.renderContext)))},e.prototype.loadComponentRefs=function(t){this.loadRefs(t,fi({canvas:"single",drawingContainer:"single",background:"single",backgroundImage:"single",totalMultiplier:"single",previewContainer:"single",previewDrawing:"single"},this.buttonsRefs))},e.prototype.init=function(){var e=this,i=new n.Formio.Promise((function(t,i){e.backgroundReady={resolve:t,reject:i}}));return this.backgroundReady.promise=i,t.prototype.init.call(this)},e.prototype.attach=function(e){var i=this,r=new n.Formio.Promise((function(t,e){i.backgroundReady={resolve:t,reject:e}}));this.backgroundReady.promise=r;var s=t.prototype.attach.call(this,e);return this.loadComponentRefs(e),this.refs.canvas&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){return i.onBackgroundReady()})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),"image"===this.imageType&&this.refs.backgroundImage?this.loadBackgroundImage(this.refs.backgroundImage):this.addBackground(),this.attachToolbar()),s},Object.defineProperty(e.prototype,"buttonsRefs",{get:function(){var t={};return Object.values(di).forEach((function(e){return e.forEach((function(e){t[e.key]="single",e.input&&(t[e.key+"-input"]="single")}))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderContext",{get:function(){return{zoomInfo:{totalMultiplier:this.zoomInfo?Math.round(100*this.zoomInfo.totalMultiplier)/100:1},buttonGroups:this.buttonGroups,disabled:t.prototype.disabled}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSchema",{get:function(){return e.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateName",{get:function(){return"sketchpad"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attachFunctions",{get:function(){var t=this,e=function(t,e,i){var n=new ni(t);return t.style.color=e,n.setColor(e,!0),n.onChange=function(e){t.style.color=e.rgbaString,i(e.rgbaString)},t},i=function(e,i,n){var r=t.refs[e];r&&(r.addEventListener("change",(function(t){return n(t.target.value)})),r.value=i)};return{stroke:function(i){return e(i,t.state.stroke,(function(e){return t.state.stroke=e}))},fill:function(i){return e(i,t.state.fill,(function(e){return t.state.fill=e}))},width:function(){return i("width-input",t.state.linewidth,(function(e){return t.state.linewidth=e}))},circle:function(){return i("circle-input",t.state.circleSize,(function(e){return t.state.circleSize=e}))}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonGroups",{get:function(){return Object.entries(di).map((function(t){return t[1]}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentLabel",{get:function(){return this.component.hideLabel?"":'<label class="control-label">'+this.component.label+"</label><br>"},enumerable:!1,configurable:!0}),e.prototype.loadBackgroundImage=function(t){var e=this;t.addEventListener("load",(function(){return e.addBackground()})),t.setAttribute("src",this.component.imageUrl)},e.prototype.createDrawingArea=function(){this.two=new Ne({type:Ne.Types.svg}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.addClass(this.canvasSvg,"formio-sketchpad-svg"),this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},e.prototype.getActualCoordinate=function(t){var e=t.x,i=t.y,n=this.zoomInfo.canvasViewBox.current.minX,r=this.zoomInfo.canvasViewBox.current.minY;return t.x=Math.round(e/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+n),t.y=Math.round(i/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+r),t},e.prototype.onBackgroundReady=function(){var t=this;this.backgroundReady.isReady=!0,this.addEventListener(window,"resize",n.Utils._.debounce((function(){return t.stretchDrawingArea()}),100)),this.resetZoom()},e.prototype.addBackground=function(){var t=this;this.refs.backgroundImage&&this.refs.backgroundImage.complete?this.setBackgroundImage():this.component.imageUrl&&"svg"===this.imageType&&n.Formio.makeStaticRequest(this.component.imageUrl,"GET",null,{noToken:!0,headers:{}}).then((function(e){t.setBackgroundImage(e)})).catch((function(e){console.warn(e),t.refs.background.innerHTML=t.t("Background image failed to load. Tagpad doesn't work without background image"),t.backgroundReady.reject()}))},e.prototype.parseSvg=function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg");return e&&e[0]?e[0]:null},e.prototype.prepareSvg=function(t){t.removeAttribute("width"),t.removeAttribute("height"),t.setAttribute("ref","backgroundImage")},e.prototype.setSvgImage=function(t){var e=this.parseSvg(t);if(e){var i=e.getAttribute("viewBox"),n=i?i.split(" ").map(parseFloat):this.mapDimensionsFromAttributes(e);this.setDimensions.apply(this,n),this.prepareSvg(e);var r=this.dimensions;this.assignZoomInfo(r),this.setViewBoxAttribute(e,r),t=(t=(new XMLSerializer).serializeToString(e)).replace("<svg:svg","<svg").replace("</svg:svg>","</svg>"),this.loadComponentRefs(this.element),this.refs.background.innerHTML=t}else console.warn("Sketchpad '"+this.component.key+"': Background SVG doesn't contain <svg> tag on it")},e.prototype.assignZoomInfo=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].default={width:t.width,height:t.height,minX:t.minX,minY:t.minY},this.zoomInfo[e].current=n.Utils._.cloneDeep(this.zoomInfo[e].default)},e.prototype.buttonAttributes=function(t){return t&&t.input&&t.input.attributes?Object.entries(t.input.attributes).map((function(t){return t[0]+"='"+t[1]+"'"})).join(" "):""},e.prototype.attachDrawEvents=function(){var t=this;this.canvasSvg.addEventListener("mousedown",(function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n="default";t.modes[t.state.mode].cursor&&(n=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=n,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top}));var r=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top}))},s=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("mousemove",r),t.canvasSvg.removeEventListener("mouseup",s),document.removeEventListener("mouseup",s);var i="default";t.modes[t.state.mode].cursor&&(i=t.modes[t.state.mode].cursor.hover||i),t.canvasSvg.style.cursor=i;var n=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:e.clientX-n.left,y:e.clientY-n.top}))};return t.canvasSvg.addEventListener("mousemove",r),t.canvasSvg.addEventListener("mouseup",s),document.addEventListener("mouseup",s),!1})),this.canvasSvg.addEventListener("touchstart",(function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:n.clientX-i.left,y:n.clientY-i.top}));var s=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0];t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:n.clientX-i.left,y:n.clientY-i.top}))},o=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("touchmove",s),t.canvasSvg.removeEventListener("touchend",o);var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.hover||r),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:n.clientX-i.left,y:n.clientY-i.top}))};return t.canvasSvg.addEventListener("touchmove",s),t.canvasSvg.addEventListener("touchend",o),!1})),this.two.update()},e.prototype.attachToolbar=function(){this.attachModesButtons(),this.attachStylesButtons(),this.attachActionsButtons(),this.setActiveButton(this.state.mode)},e.prototype.attachModesButtons=function(){var t=this;di.modes.forEach((function(e){var i=t.refs[e.key];if(i&&t.modes[e.key]){var n=t.modes[e.key];i.addEventListener("click",(function(e){return t.setState(n.state)})),t.callAttachFunction(i,e.key)}}))},e.prototype.attachStylesButtons=function(){var t=this;di.styles.forEach((function(e){var i=t.refs[e.key];i&&t.callAttachFunction(i,e.key)}))},e.prototype.attachActionsButtons=function(){var t=this;di.actions.forEach((function(e){var i=t.refs[e.key];i&&i.addEventListener("click",(function(){return t[e.key]()}))}))},e.prototype.callAttachFunction=function(t,e){this.attachFunctions[e]&&this.attachFunctions[e](t)},e.prototype.setState=function(t){Object.assign(this.state,t),this.setActiveButton(this.state.mode),this.canvasSvg.style.cursor=n.Utils._.get(this.modes[this.state.mode],"cursor.hover","default")},e.prototype.setActiveButton=function(t){var e=this;di.modes.forEach((function(i){e.refs[i.key]&&e.removeClass(e.refs[i.key],"active"),e.refs[t]&&e.addClass(e.refs[t],"active")}))},e.prototype.setBackgroundImage=function(t){if("svg"===this.imageType)if(t&&t.startsWith("<?xml"))this.setSvgImage(t);else{this.imageType="image";var e=new Image;e.setAttribute("ref","backgroundImage"),this.refs.background.appendChild(e),this.loadBackgroundImage(e)}else this.setRasterImage();this.onBackgroundImageWasSetted()},e.prototype.setRasterImage=function(){var t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight;this.setDimensions(0,0,t,e),this.assignZoomInfo(this.dimensions),this.assignZoomInfo(this.dimensions,"canvasViewBox")},e.prototype.onBackgroundImageWasSetted=function(){this.loadRefs(this.element,{backgroundImage:"single",component:"single"});var t=this.component.width,e=this.component.height;if(this.component.autoSize||this.componentModal){var i=this.calculateAutoSize();t=i.width,e=i.height}t&&e&&!this.component.autoSize&&(this.refs.drawingContainer.style.maxWidth=t+"px",this.refs.drawingContainer.style.maxHeight=e+"px"),this.setDimensions(0,0,this.refs.backgroundImage.naturalWidth,this.refs.backgroundImage.naturalHeight),this.assignZoomInfo(this.dimensions,"canvasViewBox"),this.dimensionsCorrection=this.dimensions.width/this.zoomInfo.viewBox.default.width,this.setViewBoxAttribute(this.canvasSvg,this.zoomInfo.canvasViewBox.default),this.setEditorSize(this.dimensions.width,this.dimensions.height),this.stretchDrawingArea(),this.draw(this.dataValue),this.backgroundReady.resolve()},e.prototype.calculateAutoSize=function(){var t=Math.round(this.refs.drawingContainer.offsetWidth),e=this.dimensions.width/this.dimensions.height,i=Math.round(t/e),n=Math.round(window.innerHeight-.2*window.innerHeight);return(n<i||0===t)&&(i=n,t=Math.round(i*e)),{width:t,height:i}},e.prototype.setOpenModalElement=function(){var t="\n      "+this.componentLabel+"\n      <div class='formio-sketchpad-modal-preview-container' ref='previewContainer'>\n        <div ref=\"openModal\">\n          <img class='formio-sketchpad-modal-preview-background' src="+this.component.imageUrl+' width="100%"/>\n          '+this.getPreviewImage()+"\n        </div>\n      </div>\n    ";this.componentModal.setOpenModalElement(t)},e.prototype.getPreviewImage=function(){return this.canvasSvg&&this.two&&this.zoomInfo.viewBox.default?'<img class="formio-sketchpad-modal-preview-drawing" src="data:image/svg+xml;base64,'+this.getEncodedDrawing()+'"\n                ref="previewDrawing" width="100%"/>':""},e.prototype.getValueAsString=function(t,e){return t&&t.length?"[Complex Data]":""},e.prototype.getEncodedDrawing=function(){var t=this.getSvg(),e=(new XMLSerializer).serializeToString(t);return window.btoa(e)},e.prototype.getModalPreviewTemplate=function(){return"\n      "+this.componentLabel+"\n      <div class='formio-sketchpad-modal-preview-container' ref='previewContainer'>\n        <div ref=\"openModal\">\n          <img class='formio-sketchpad-modal-preview-background' src="+this.component.imageUrl+' width="100%"/>\n          '+this.getPreviewImage()+"\n        </div>\n      </div>"},e.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},e.prototype.setDimensions=function(t,e,i,n){this.dimensions={width:i,height:n,minX:t,minY:e}},e.prototype.stretchDrawingArea=function(){var t=this.calculateAutoSize(),e=t.width,i=t.height;if(e&&i){var n=this.zoomInfo,r=n.canvasViewBox,s=n.totalMultiplier,o=r.default.width,a=r.default.height;if(this.dimensionsMultiplier=e/o,this.dimensions.width=Math.round(o*this.dimensionsMultiplier),this.dimensions.height=Math.round(a*this.dimensionsMultiplier),e===this.editorSize.width&&i===this.editorSize.height)return;var l=s>1?this.dimensions.width:this.dimensions.width*s,h=s>1?this.dimensions.height:this.dimensions.height*s;this.setEditorSize(l,h)}},e.prototype.setEditorSize=function(t,e){this.two&&(this.editorSize={width:t,height:e},this.two.width=t,this.two.height=e,this.two.update()),this.refs.backgroundImage&&(this.refs.backgroundImage.setAttribute("width",t),this.refs.backgroundImage.setAttribute("height",e)),this.canvasSvg&&(this.canvasSvg.style.width=t,this.canvasSvg.style.height=e)},e.prototype.clear=function(){this.two&&this.two.clear()},e.prototype.clearAll=function(){this.layers=[],this.dataValue=[],this.two&&(this.clear(),this.two.update())},e.prototype.draw=function(t){var e=this;this.two&&(this.clear(),t&&t.length?(this.layers=t.map((function(t){return e.modes[t.mode].draw(t)})),this.two.update(),this.appendDrawingToPreview()):this.two.update())},e.prototype.appendDrawingToPreview=function(){var t;if(null===(t=this.componentModal)||void 0===t?void 0:t.element){this.loadComponentRefs(this.componentModal.element);var e="data:image/svg+xml;base64,"+this.getEncodedDrawing();if(this.refs.previewDrawing)this.refs.previewDrawing.setAttribute("src",e);else{var i=new Image;i.src=e,this.addClass(i,"formio-sketchpad-modal-preview-drawing"),i.setAttribute("ref","previewDrawing"),this.refs.previewContainer&&(this.refs.previewContainer.appendChild(i),this.addEventListener(i,"click",this.componentModal.openModalListener))}}},e.prototype.undo=function(){var t=this.dataValue.slice();t.length&&(this.deleted.push(t.pop()),this.dataValue=t,this.triggerChange(),this.draw(t))},e.prototype.redo=function(){if(this.deleted.length){var t=this.dataValue.slice();t.push(this.deleted.pop()),this.dataValue=t,this.triggerChange(),this.draw(t)}},e.prototype.setValue=function(e,i){t.prototype.setValue.call(this,e,i),this.backgroundReady.isReady&&this.two&&this.draw(e)},e.prototype.getSvg=function(){var t=this.canvasSvg.cloneNode(!0);this.addClass(t,"formio-sketchpad-preview-svg"),t.removeAttribute("style");var e=this.zoomInfo.canvasViewBox.default;return this.setViewBoxAttribute(t,e),t},e.prototype.normalizeSvgOffset=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t];this.zoomInfo[t].current.minX=e.current.minX<e.default.minX?e.default.minX:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY<e.default.minY?e.default.minY:e.current.minY;var i=e.default.width-e.current.width+e.default.minX,n=e.default.height-e.current.height+e.default.minY;this.zoomInfo[t].current.minX=e.current.minX>i?i:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY>n?n:e.current.minY},e.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},e.prototype.updateSvgViewBox=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t].current;"svg"===this.imageType&&("viewBox"===t?this.setViewBoxAttribute(this.refs.backgroundImage,e):this.setViewBoxAttribute(this.canvasSvg,e))},e.prototype.drag=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.minX=this.zoomInfo[e].current.minX-t.x,this.zoomInfo[e].current.minY=this.zoomInfo[e].current.minY-t.y,this.normalizeSvgOffset(e),this.updateSvgViewBox(e)},e.prototype.dragImage=function(t){var e=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.drag(e),this.drag(t,"canvasViewBox")},e.prototype.setTotalMultiplier=function(t){this.zoomInfo.totalMultiplier=t,this.refs.totalMultiplier.innerHTML=this.t(Math.round(100*t)/100)},e.prototype.zoomImage=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.width=Math.round(this.zoomInfo[e].default.width/this.zoomInfo.totalMultiplier),this.zoomInfo[e].current.height=Math.round(this.zoomInfo[e].default.height/this.zoomInfo.totalMultiplier);var i=this.zoomInfo[e].current,n=i.width,r=i.height,s=this.zoomInfo[e].default,o=s.width,a=s.height;n>o&&r>a?this.zoomOut(e):this.zoomIn(t,e),this.updateSvgViewBox(e)},e.prototype.zoom=function(t,e){this.setTotalMultiplier(this.zoomInfo.totalMultiplier*e);var i=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.zoomImage(i),this.zoomImage(t,"canvasViewBox")},e.prototype.zoomOut=function(t){void 0===t&&(t="viewBox"),this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier),this.zoomInfo[t].current=n.Utils._.cloneDeep(this.zoomInfo[t].default)},e.prototype.zoomIn=function(t,e){void 0===e&&(e="viewBox"),this.canvasSvg.width===this.dimensions.width&&this.canvasSvg.height===this.dimensions.height||this.setEditorSize(this.dimensions.width,this.dimensions.height),"svg"!==this.imageType?this.refs.backgroundImage&&this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier):(this.zoomInfo[e].current.minX=t.x-this.zoomInfo[e].current.width/2,this.zoomInfo[e].current.minY=t.y-this.zoomInfo[e].current.height/2),this.normalizeSvgOffset(e)},e.prototype.resetZoom=function(){this.zoom({x:0,y:0},this.component.defaultZoom/100/this.zoomInfo.totalMultiplier)},e.editForm=hi,e}(gi);var vi=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];t.call(e,r[1],r[0])}},e}()}(),yi="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,_i=void 0!==i.g&&i.g.Math===Math?i.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),bi="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(_i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},wi=["top","right","bottom","left","width","height","size","weight"],xi="undefined"!=typeof MutationObserver,ki=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,r=0;function s(){i&&(i=!1,t()),n&&a()}function o(){bi(s)}function a(){var t=Date.now();if(i){if(t-r<2)return;n=!0}else i=!0,n=!1,setTimeout(o,20);r=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){yi&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),xi?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){yi&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;wi.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Si=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Ci=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||_i},Ri=Ai(0,0,0,0);function Mi(t){return parseFloat(t)||0}function Oi(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+Mi(t["border-"+i+"-width"])}),0)}var Ei="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Ci(t).SVGGraphicsElement}:function(t){return t instanceof Ci(t).SVGElement&&"function"==typeof t.getBBox};function Ai(t,e,i,n){return{x:t,y:e,width:i,height:n}}var Ti=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ai(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=function(t){return yi?Ei(t)?function(t){var e=t.getBBox();return Ai(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return Ri;var n=Ci(t).getComputedStyle(t),r=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i],s=t["padding-"+r];e[r]=Mi(s)}return e}(n),s=r.left+r.right,o=r.top+r.bottom,a=Mi(n.width),l=Mi(n.height);if("border-box"===n.boxSizing&&(Math.round(a+s)!==e&&(a-=Oi(n,"left","right")+s),Math.round(l+o)!==i&&(l-=Oi(n,"top","bottom")+o)),!function(t){return t===Ci(t).document.documentElement}(t)){var h=Math.round(a+s)-e,c=Math.round(l+o)-i;1!==Math.abs(h)&&(a-=h),1!==Math.abs(c)&&(l-=c)}return Ai(r.left,r.top,a,l)}(t):Ri}(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Pi=function(t,e){var i,n,r,s,o,a,l,h=(n=(i=e).x,r=i.y,s=i.width,o=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),Si(l,{x:n,y:r,width:s,height:o,top:r,right:n+s,bottom:o+r,left:n}),l);Si(this,{target:t,contentRect:h})},Fi=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new vi,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Ci(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Ti(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Ci(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Pi(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Ii="undefined"!=typeof WeakMap?new WeakMap:new vi,zi=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=ki.getInstance(),n=new Fi(e,i,this);Ii.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){zi.prototype[t]=function(){var e;return(e=Ii.get(this))[t].apply(e,arguments)}}));const ji=void 0!==_i.ResizeObserver?_i.ResizeObserver:zi,Di=[{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"textfield",label:"Width",input:!0,key:"canvasWidth",weight:20},{type:"textfield",label:"Height",input:!0,key:"canvasHeight",weight:20},{type:"textfield",label:"Dot Size",input:!0,key:"dotSize",placeholder:"10",weight:20},{type:"textfield",label:"Dot Stroke Size",input:!0,key:"dotStrokeSize",placeholder:"2",weight:20},{type:"textfield",label:"Dot Stroke Color",input:!0,key:"dotStrokeColor",placeholder:"#333",weight:20},{type:"textfield",label:"Dot Fill Color",input:!0,key:"dotFillColor",placeholder:"#ccc",weight:20}],Li=[{key:"multiple",ignore:!0}],Bi=[{type:"textarea",input:!0,key:"template",label:"Dot Value Template",editor:"ace",as:"html",rows:10,weight:18,tooltip:"The HTML template for displaying dots' values in preview mode (View Tab, generated PDF)",description:'Four available variables. "dot" is the data of the dot, "index" is the index of the dot (indexes start from \'0\'), "components" is an array of components of the form associated with the dot and "instance" is an instance of the Tagpad.'}];var Vi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},Ni=n.Components.components.component.editForm;function Ui(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ni.apply(void 0,Vi([[{key:"display",components:Di},{key:"data",components:Li},{key:"templates",label:"Templates",weight:5,components:Bi}]],t))}var Wi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hi=function(){return(Hi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},qi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},Gi=n.Components.components.component,Xi=n.Components.components.nestedarray;const Yi=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=t.apply(this,e)||this;r.type="tagpad",r.dots=[];var s=new n.Formio.Promise((function(t,e){r.backgroundReady={resolve:t,reject:e}}));return r.backgroundReady.promise=s,r.dimensionsMultiplier=1,r.sizeFromSubmission=!1,r}return Wi(e,t),e.schema=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Xi.schema.apply(Xi,qi([{type:"tagpad",label:"Tagpad",key:"tagpad",input:!0,dotSize:10,dotStrokeSize:2,dotStrokeColor:"#333",dotFillColor:"#ccc",components:[],tree:!0,template:e.defaultDotPreviewTemplate}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Tagpad",group:"premium",icon:"tag",weight:115,documentation:"",schema:e.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSchema",{get:function(){return e.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iterableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"removeDot",method:"removeSelectedDot"}].forEach((function(i){t.hasButton(i.name)&&(e[i.name]=i)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderContext",{get:function(){return{selectedDot:this.selectedDot,hasDots:this.dots&&this.dots.length||this.dataValue.length,buttons:this.buttons,canvasMaxHeight:this.userDefiniedCanvasSize.height?this.userDefiniedCanvasSize.height+"px":"50%",canvasMaxWidth:this.userDefiniedCanvasSize.width?this.userDefiniedCanvasSize.width+"px":"50%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userDefiniedCanvasSize",{get:function(){var t=parseInt(this.component.canvasWidth,10),e=parseInt(this.component.canvasHeight,10);return isNaN(t)||isNaN(e)?{width:void 0,height:void 0}:{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultDotPreviewTemplate",{get:function(){return'<div class="dot-preview-label"> Dot {{index + 1}}: </div>\n    {% Object.keys(dot).forEach(function(key) { %}\n      <div style="margin-left: 15px;"><span class="dot-preview-field-label">{{key}}</span>:\n        <p class="dot-preview-value">\n          {{\n            instance.getComponent([index, key]) && \'getValueAsString\' in instance.getComponent([index, key])\n              ? instance.getComponent([index, key]).getValueAsString(dot[key])\n              : dot[key]\n          }}\n        </p>\n    </div>\n    {% }) %}'},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e=this;if(this.builderMode)return this.editForms=[],t.prototype.init.call(this);this.components=this.components||[];var i=this.dataValue||this.emptyValue;this.editForms=i.map((function(t,i){return{isOpen:!1,data:t.dot?t.dot.data:t.data,components:e.createFormComponents(t,i)}}))},e.prototype.render=function(e){if(this.builderMode)return t.prototype.render.call(this);var i=this.renderContext;return t.prototype.render.call(this,e||this.renderTemplate("tagpad",Hi(Hi({},i),{components:this.renderComponents(this.formComponents)})))},e.prototype.attach=function(e){var i=this,r=new n.Formio.Promise((function(t,e){i.backgroundReady={resolve:t,reject:e}}));return this.backgroundReady.promise=r,this.builderMode||(this.loadRefs(e,{canvas:"single",background:"single",form:"single",canvasImage:"single",image:"single",removeDot:"single"}),this.formComponents&&this.attachComponents(this.refs.form,this.formComponents),this.refs.background&&this.hasBackgroundImage&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){i.resizeObserver=new ji((function(){if(i.originalImageSize&&(!i.originalImageSize.width||!i.originalImageSize.height)){i.setOriginalImageSize();var t=i.originalImageSize,e=t.width,n=t.height;i.setDimensions(0,0,e,n),i.setViewBoxAttribute(i.canvasSvg,i.dimensions)}i.stretchDrawingArea()})),i.resizeObserver.observe(i.refs.background)})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),this.refs.image&&!this.imageWasLoaded?this.refs.image.addEventListener("load",(function(t){i.setOriginalImageSize(),i.imageWasLoaded=!0,i.addBackground()})):this.addBackground()),this.attachButtons(),this.dataValue.length>0&&0===this.dots.length?this.createDots():this.dots.length>0&&this.dots.forEach((function(t){return i.drawDot(t.dot,t.index)}))),t.prototype.attach.call(this,e)},e.prototype.beforeFocus=function(t){"beforeFocus"in this.parent&&this.parent.beforeFocus(this);var e=this.getRelativePath(t.path),i=n.Utils.getArrayFromComponentPath(e);n.Utils._.isNumber(i[0])&&this.selectDot(i[0])},e.prototype.getRelativePath=function(t){var e="."+this.key,i=this.isInputComponent?this.path:this.path.slice(0).replace(e,"");return t.replace(i,"")},e.prototype.setOriginalImageSize=function(){this.loadRefs(this.element,{background:"single",canvasContainer:"single"});var t=window.getComputedStyle(this.refs.background),e=parseInt(null==t?void 0:t.width,10),i=parseInt(null==t?void 0:t.height,10);e=isNaN(e)?0:e,i=isNaN(i)?0:i,this.originalImageSize={width:e,height:i}},e.prototype.attachDrawEvents=function(){var t=this;if(!this.options.readOnly&&this.canvasSvg){var e=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top});t.addDot({coordinate:n,data:{}}),t.selectDot(t.dots.length-1)};this.canvasSvg.addEventListener("mouseup",e);var i=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0],r=t.getActualCoordinate({x:n.pageX-i.left,y:n.pageY-i.top});t.addDot({coordinate:r,data:{}}),t.selectDot(t.dots.length-1)};this.canvasSvg.addEventListener("touchend",i),this.on("destroy",(function(){t.canvasSvg.removeEventListener("touchend",i),t.canvasSvg.removeEventListener("mouseup",e)})),this.two.update()}},e.prototype.attachButtons=function(){var t=this;n.Utils._.each(this.buttons,(function(e){var i=t.refs[""+e.name];i&&t.addEventListener(i,"click",(function(n){n.preventDefault(),i.setAttribute("disabled","disabled"),t.setLoading(i,!0),"function"==typeof t[e.method]&&t[e.method](),i.removeAttribute("disabled"),t.setLoading(i,!1)}))}))},e.prototype.redraw=function(){t.prototype.redraw.call(this);var e=[];this.dots.forEach((function(t){return e.push(t.shape.circle,t.shape.text)})),this.two&&this.two.add(e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.emit("destroy"),this.off("destroy")},e.prototype.destroyDot=function(t){if(this.dots[t]){var e=this.dots[t];e.shape.circle._renderer.elem.removeEventListener("mouseup",this.dotClicked),e.shape.text._renderer.elem.removeEventListener("mouseup",this.dotClicked)}},e.prototype.destroyComponents=function(){if(this.builderMode||!this.formComponents)return t.prototype.destroyComponents.call(this);this.formComponents.slice().forEach((function(t){return t.destroy()}))},e.prototype.addBackground=function(){this.refs.image&&this.refs.image.complete&&!this.imageWasLoaded?this.imageWasLoaded=!0:this.refs.image&&this.refs.image.complete&&this.imageWasLoaded&&this.setBackgroundImage()},e.prototype.setBackgroundImage=function(t){if(this.sizeFromSubmission)this.setViewBoxAttribute(this.canvasSvg,this.dimensions);else{var e=this.originalImageSize,i=e.width,n=e.height;this.setDimensions(0,0,i,n),this.setViewBoxAttribute(this.canvasSvg,this.dimensions)}this.loadRefs(this.refs.background,{backgroundImage:"single"}),this.stretchDrawingArea(),this.backgroundReady.resolve()},e.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},e.prototype.setDimensions=function(t,e,i,n){this.dimensions={width:i,height:n,minX:t,minY:e}},e.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},e.prototype.hasButton=function(t){switch(t){case"removeDot":return!this.options.readOnly;default:return!1}},Object.defineProperty(e.prototype,"iteratableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),e.prototype.componentContext=function(t){return this.iteratableRows[t.row]?this.iteratableRows[t.row].data:{}},e.prototype.createFormComponents=function(t,e){var i=this,r=[];return this.component.components.forEach((function(s){var o=n.Utils._.clone(i.options);o.row=""+e,o.name+="["+e+"]";var a=t.dot?t.dot.data:t.data,l=i.createComponent(s,o,a);r.push(l)})),r},e.prototype.redrawDots=function(){this.dots=[],this.two.clear(),this.two.render(),this.createDots()},e.prototype.createDots=function(){var t=this,e=this.dataValue;e&&e.length&&this.two&&(e.forEach((function(e,i){t.dots[i]||t.addDot(e)})),this.dots.splice(e.length),this.editForms.splice(e.length))},e.prototype.getComponent=function(t,e){var i=null,r=(t=Array.isArray(t)?t:[t])[0],s=t[1],o=t.slice(2);return n.Utils._.isNumber(r)&&s&&(i=this.editForms[r].components.find((function(t){return t.key===s})))&&(n.Utils._.isFunction(e)&&e(i,this.getComponents),o.length&&"getComponent"in i)?i.getComponent(o,e):i},e.prototype.rescaleImage=function(t){var e=this;if(void 0===t&&(t={}),t.fromSubmission&&this.dataValue.length)return n.Utils._.get(this.dataValue,"[0].coordinate.width",!1)?(this.setDimensions(0,0,this.dataValue[0].coordinate.width,this.dataValue[0].coordinate.height),void(this.sizeFromSubmission=!0)):void(this.hasBackgroundImage&&this.backgroundReady.promise.then((function(){e.dataValue=e.dataValue.map((function(t){return t.coordinate.width=e.dimensions.width,t.coordinate.height=e.dimensions.height,t}))})))},e.prototype.setValue=function(t,e){this.dataValue=t,this.rescaleImage(e),this.createDots(),this.rebuild()},e.prototype.getActualCoordinate=function(t){return t.x=Math.round(t.x/this.dimensionsMultiplier)+this.dimensions.minX,t.y=Math.round(t.y/this.dimensionsMultiplier)+this.dimensions.minY,t.width=this.dimensions.width,t.height=this.dimensions.height,t},e.prototype.selectDot=function(t){if(this.selectedDot&&this.dots[this.selectedDot.index]&&(this.dots[this.selectedDot.index].shape.circle.dashes=[0]),!n.Utils._.isNumber(t)||!this.dots[t])return this.selectedDot=null,void this.redraw();var e=this.dots[t];this.selectedDot=e,this.dots[this.selectedDot.index].shape.circle.dashes=[1],this.formComponents=this.editForms[t].components,this.redraw(),this.triggerChange()},e.prototype.dotClicked=function(t,e){t.stopPropagation(),this.selectDot(e)},e.prototype.addDot=function(t){var e=this.dots.length,i=this.drawDot(t,e);this.dots.push({index:e,dot:t,shape:i}),this.dataValue[e]||this.dataValue.push(t),this.editForms.push({components:this.createFormComponents(this.dots[e],e),data:t})},e.prototype.drawDot=function(t,e){var i=this,n=t.coordinate,r=n.x,s=n.y,o=this.drawDotCircle(r,s,this.component.dotSize,e),a=this.drawDotLabel(r,s,e+1);return this.two.add(o,a),this.two.update(),o._renderer.elem.addEventListener("mouseup",(function(t){return i.dotClicked(t,e)})),a._renderer.elem.addEventListener("mouseup",(function(t){return i.dotClicked(t,e)})),{circle:o,text:a}},e.prototype.drawDotCircle=function(t,e,i,n){var r=this.two.makeCircle(t,e,i);return r.fill=this.component.dotFillColor,r.stroke=this.component.dotStrokeColor,r.linewidth=this.component.dotStrokeSize,r.className+=" formio-tagpad-dot",this.selectedDot&&this.selectedDot.index===n&&(r.dashes=[1]),r},e.prototype.drawDotLabel=function(t,e,i){var n=new Ne.Text(i,t,e);return n.className+=" formio-tagpad-dot-index",n.styles={color:this.component.dotStrokeColor},n},e.prototype.createDrawingArea=function(){this.two=new Ne({type:Ne.Types.svg,width:"100%",height:"100%"}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},e.prototype.stretchDrawingArea=function(){var t,e;this.loadRefs(this.element,{background:"single"});var i=null===(t=this.refs.background)||void 0===t?void 0:t.offsetWidth,n=null===(e=this.refs.background)||void 0===e?void 0:e.offsetHeight;if(i&&n){var r=i/this.dimensions.width;this.dimensionsMultiplier!==r&&(this.dimensionsMultiplier=i/this.dimensions.width,this.setEditorSize(i,n))}},e.prototype.setEditorSize=function(t,e){this.two.width=t,this.two.height=e,this.two.update(),this.refs.image&&(this.refs.image.setAttribute("width",t),this.refs.image.setAttribute("height",e))},Object.defineProperty(e.prototype,"hasBackgroundImage",{get:function(){return this.component.image||this.component.imageUrl},enumerable:!1,configurable:!0}),e.prototype.removeSelectedDot=function(){this.selectedDot&&this.dataValue[this.selectedDot.index]&&(this.destroyDot(this.selectedDot.index),this.destroyComponents(),this.dataValue.splice(this.selectedDot.index,1),this.dots=[],this.editForms=[],this.components=[],this.createDots(),this.selectDot(0))},e.prototype.focus=function(){return this.refs.canvas&&this.refs.canvas.focus()},e.prototype.checkData=function(t,e,i){var n=this;return t=t||this.rootValue,e=e||{},i=i||this.data,Gi.prototype.checkData.call(this,t,e,i),this.editForms.reduce((function(i,r,s){return n.checkDot(t,e,r.data,s)&&i}),!0)},e.prototype.checkValidity=function(t,e,i){return t=t||this.rootValue,i=i||this.data,this.checkCondition(i,t)?this.checkComponentValidity(t,e,i):(this.setCustomValidity(""),!0)},e.prototype.checkComponentValidity=function(e,i,n){var r=this;if(!t.prototype.checkComponentValidity.call(this,e,i,n))return!1;var s=!0;if(this.editForms.forEach((function(t,e){var n=r.checkDotValidity(t,i,r.dots[e]);s=s&&n})),!s)return!1;var o=this.invalid||this.invalidMessage(e,i);return this.setCustomValidity(o,i),!0},e.prototype.checkDot=function(e,i,n,r){var s=t.prototype.checkData.call(this,e,i,n,this.editForms[r].components);return this.setDotValidity(this.dots[r],s),s},e.prototype.checkDotValidity=function(t,e,i){var n=!0;if(!t)return!0;var r=e||t.dirty;return t.components.forEach((function(e){(r=r||!e.pristine)&&(e.setPristine(!r),t.dirty=!!r,n=n&&e.checkValidity(null,r,t.data))})),this.setDotValidity(i,n),!!n},e.prototype.addDotNumberToErrorMessages=function(t){this.editForms[t.index].components.forEach((function(e){e.errors.forEach((function(e){var i=" (see dot "+(t.index+1)+")";e.message.includes(i)||(e.message+=i,e.messages.forEach((function(t){return t.message+=i})))}))}))},e.prototype.setDotValidity=function(t,e){if(t){var i=e?this.component.dotStrokeColor:"#ff0000";t.shape.circle.stroke=i,t.shape.text.styles.color=i,this.two.update(),this.addDotNumberToErrorMessages(t)}},e.prototype.getDataAsString=function(){var t=this,i="",n=this.component.template||e.defaultDotPreviewTemplate;return this.iterableRows.forEach((function(e,r){var s=e.data,o=e.components,a=t.interpolate(n,{dot:s,index:r,components:o,instance:t});i+=a})),i},e.prototype.getValueAsString=function(e,i){var r=this;if(!e||!e.length)return"";if(i&&i.email){var s="";n.Utils.eachComponent(this.components,(function(t){s+="<th>"+t.label+"</th>"}));var o='\n        <table border="1" style="width:100%">\n          <thead>\n            <tr><th>Dots</th>'+s+"</tr>\n          </thead>\n          <tbody>\n      ";return e.map((function(t,e){var s=r.editForms[e].components,a="";n.Utils.eachComponent(s,(function(t){a+='<td style="text-align: center">',t.isInputComponent&&t.visible&&!t.skipInEmail&&(a+=t.getView(t.dataValue,i)),a+="</td>"})),o+='\n          <tr>\n            <td style="text-align: center">'+(e+1)+"</td>\n            "+a+"\n          </tr>\n        "})),o+="</tbody></table>"}return t.prototype.getValueAsString.call(this,e,i)},e.editForm=Ui,e}(Xi),Zi=[{type:"checkbox",input:!0,weight:105,key:"inlineEdit",label:"Inline Editing",tooltip:'Check this if you would like your changes within "edit" mode to be committed directly to the submission object as that row is being changed'},{key:"defaultValue",ignore:!0},{key:"multiple",ignore:!0}],Ki=[{key:"placeholder",ignore:!0},{key:"modalEdit",ignore:!0}],$i=[{type:"textarea",label:"Header Template",key:"templates.header",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",tooltip:'This is the <a href="https://lodash.com/docs/4.17.5#template">Lodash Template</a> used to render the header of the Dynamic Wizard.',customConditional:function(){return!n.Utils.Evaluator.noeval}},{type:"textarea",label:"Row Template",key:"templates.row",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Three available variables. "row" is an object of one row\'s data, "components" is the array of components in the grid and "state" is current row\'s state (can be "draft" or "saved").',tooltip:'This is the <a href="https://lodash.com/docs/4.17.5#template">Lodash Template</a> used to render each row of the Dynamic Wizard.',customConditional:function(){return!n.Utils.Evaluator.noeval}},{type:"textarea",label:"Footer Template",key:"templates.footer",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:'This is the <a href="https://lodash.com/docs/4.17.5#template">Lodash Template</a> used to render the footer of the Dynamic Wizard.',customConditional:function(){return!n.Utils.Evaluator.noeval}},{type:"textfield",input:!0,key:"rowClass",label:"Row CSS Class",placeholder:"Row CSS Class",tooltip:"CSS class to add to the edit row wrapper."}],Ji=[{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{type:"checkbox",input:!0,weight:105,key:"rowDrafts",label:"Enable Row Drafts",tooltip:"Allow save rows even if their data is invalid. Errors will occur when try to submit with invalid rows."}];var Qi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},tn=n.Components.components.component.editForm;function en(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tn.apply(void 0,Qi([[{label:"Templates",key:"templates",weight:5,components:$i},{key:"display",components:Ki},{key:"data",components:Zi},{key:"validation",components:Ji}]],t))}var nn=i(213),rn=i(131);const sn={row:nn.Z,header:rn.Z};var on=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),an=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},ln=n.Components.components.editgrid,hn={New:"new",Editing:"editing",Saved:"saved",Removed:"removed",Draft:"draft"};const cn={datasource:p,sketchpad:mi,tagpad:Yi,dynamicWizard:function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.apply(this,e)||this;return n.type="dynamicWizard",n.isChangingMode=!0,n.isSavingInProgress=!1,n.editRows=[],n.changingRowIndex=null,n.step=0,n.buttonSettings={showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!n.options.readOnly},n.shouldUpdate=!0,n}return on(e,t),e.schema=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return ln.schema.apply(ln,an([{type:"dynamicWizard",label:"Dynamic Wizard",key:"dynamicWizard",templates:{header:e.defaultHeaderTemplate,row:e.defaultRowTemplate,footer:""}}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Dynamic Wizard",group:"premium",icon:"tasks",ignoreForForm:!0,disableSiblings:!0,weight:20,schema:e.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultHeaderTemplate",{get:function(){return'<div class="row">\n    <div class="col-sm-2">\n      Users\n    </div>\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultRowTemplate",{get:function(){return'<div class="list-group-item">\n    <div class="list-group-subheader">\n      <div class="row">\n        <div class="col-sm-2">\n          User {{ rowIndex + 1 }}\n        </div>\n        {% if (!ctx.self.options.readOnly) { %}\n        <div class="col-sm-2">\n          <div class="btn-group pull-right">\n            <button class="btn btn-default btn-light btn-sm editCard"><i class="{{ ctx.iconClass(\'edit\') }}"></i></button>\n            <button class="btn btn-danger btn-sm removeCard"><i class="{{ ctx.iconClass(\'trash\') }}"></i></button>\n          </div>\n        </div>\n        {% } %}\n      </div>\n    </div>\n    {% ctx.util.eachComponent(ctx.components, function(component) { %}\n    {% if (!component.hasOwnProperty(\'tableView\') || component.tableView) { %}\n    <div class="row">\n      <div class="col-sm-2">\n        {{ component.key }}\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-sm-2">\n        {{ ctx.getView(component, ctx.row[component.key]) }}\n      </div>\n    </div>\n    {% } %}\n    {% }) %}\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicWizardKey",{get:function(){return"dynamicWizard-"+this.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowRef",{get:function(){return this.dynamicWizardKey+"-row"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowElements",{get:function(){return this.refs[this.rowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowRefs",{get:function(){return this.refs["dynamicWizard-"+this.component.key+"-row"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agreeButtonRef",{get:function(){return this.dynamicWizardKey+"-agreeButton"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"denyButtonRef",{get:function(){return this.dynamicWizardKey+"-denyButton"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agreeButtonElements",{get:function(){return this.refs[this.agreeButtonRef]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelRowRef",{get:function(){return this.dynamicWizardKey+"-cancelRow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelRowElements",{get:function(){return this.refs[this.cancelRowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inlineEditMode",{get:function(){return this.component.inlineEdit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"saveEditMode",{get:function(){return!this.inlineEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"cancel",method:"cancelRow"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"}].forEach((function(i){t.hasButton(i.name)&&(e[i.name]=i)})),e},enumerable:!1,configurable:!0}),e.prototype.init=function(){return this.secondRender=!1,this.shouldUpdate=!0,this.changingRowIndex=null,this.builderMode&&(this.editRows=[]),t.prototype.init.call(this)},e.prototype.render=function(e){var i,r;if(this.builderMode)return t.prototype.render.call(this);var s=this.dataValue||[],o=n.Utils.Evaluator.noeval?sn.header:n.Utils._.get(this.component,"templates.header"),a=this.editRows[this.changingRowIndex];return 0===this.step&&a&&!a.components[this.step]._visible&&this.nextPage(),t.prototype.render.call(this,e||this.renderTemplate("dynamicWizard",{ref:{row:this.rowRef,agreeButton:this.agreeButtonRef,denyButton:this.denyButtonRef},header:this.renderString(o),footer:this.renderString(n.Utils._.get(this.component,"templates.footer"),{components:this.component.components,value:s}),rows:this.editRows.map(this.renderRow.bind(this)),currentComponent:-1===this.step?null:null===(r=null===(i=this.editRows[this.changingRowIndex])||void 0===i?void 0:i.components[this.step])||void 0===r?void 0:r.render(),errors:this.editRows.map((function(t){return t.error})),buttons:this.buttons,hasRemoveButtons:this.hasRemoveButtons(),isChangingMode:this.isChangingMode,isDisabled:!this._visible||this._disabled,dynamicWizardKey:this.dynamicWizardKey,readOnly:this.options.readOnly}))},e.prototype.attach=function(e){var i,n=this,r=t.prototype.attach.call(this,e);if(this.builderMode)return t.prototype.attach.call(this,e);if(!this.secondRender&&this.shouldUpdate&&!this.options.readOnly&&(this.secondRender=!0,0===this.root.page&&this._parentVisible&&this._visible&&!this._disabled))return this.shouldUpdate=!1,this.isInitRowExists=!0,void this.addRow(!0);if(this.root.valueIsSet&&this.isInitRowExists&&(this.isInitRowExists=!1,this.root.editMode?this.cancelRow():this.root.redraw()),this.on("setChangingMode",(function(){n.shouldUpdate&&n.page===n.root.page&&(n.addRow(),n.shouldUpdate=!1,n.secondRender=!0)})),this.loadRefs(e,((i={})[this.agreeButtonRef]="multiple",i[this.denyButtonRef]="multiple",i[this.rowRef]="multiple",i[this.dynamicWizardKey+"-cancel"]="single",i[this.dynamicWizardKey+"-previous"]="single",i[this.dynamicWizardKey+"-next"]="single",i)),this.agreeButtonElements.forEach((function(t){n.addEventListener(t,"click",(function(){n.addRow(),-1===n.root.currentNextPage&&n.root.redraw()}))})),this.attachNav(),this.isChangingMode){var s=this.editRows[this.changingRowIndex];s&&this.attachComponents(this.rowElements[0],s.components,this.component.components,!0)}else this.rowElements.forEach((function(t,e){[{className:"removeCard",event:"click",action:function(){return n.removeRow(e)}},{className:"editCard",event:"click",action:function(){n.editRow(e)}}].forEach((function(e){var i=e.className,r=e.event,s=e.action,o=t.getElementsByClassName(i);Array.prototype.forEach.call(o,(function(t){n.addEventListener(t,r,s)}))}))}));return r},e.prototype.attachNav=function(){var t=this;n.Utils._.each(this.buttons,(function(e){var i=t.refs[t.dynamicWizardKey+"-"+e.name];t.addEventListener(i,"click",(function(i){i.preventDefault(),t[e.method]()&&"nextPage"===e.method||t.redraw()}))}))},e.prototype.attachComponents=function(e,i,r,s){var o;if(void 0===r&&(r=this.component.components),this.builderMode)return t.prototype.attachComponents.call(this,e,i,r);if(s){if(i=i||this.component.components,!(e=this.hook("attachComponents",e,i,r,this)))return new n.Formio.Promise((function(){}));var a=0,l=[];return this.isChangingMode?n.Utils._.isNil(this.step)||(null===(o=e.children[0])||void 0===o?void 0:o.getAttribute("data-noattach"))||!i[this.step]||l.push(i[this.step].attach(e.children[0])):Array.prototype.slice.call(e.children).forEach((function(t){!t.getAttribute("data-noattach")&&i[a]&&(l.push(i[a].attach(t)),a++)})),n.Formio.Promise.all(l)}},e.prototype.isOpen=function(t){return[hn.New,hn.Editing].includes(null==t?void 0:t.state)},e.prototype.addRow=function(t){if(void 0===t&&(t=!1),!this.options.readOnly){var e,i={},r=this.editRows.length;return n.Utils._.isNil(this.changingRowIndex)&&(this.changingRowIndex=this.editRows.length,e={components:this.createRowComponents(i,r),data:i,state:hn.New,backup:null,error:null},this.editRows.push(e),this.inlineEditMode&&(this.dataValue.push(i),this.triggerChange()),this.checkRow("checkData",null,{},e.data,e.components),this.component.modal&&this.addRowModal(r)),this.isChangingMode=!0,this.step=-1!==this.step?this.step:0,this.toggleChangingMode(t),e||this.editRows[this.changingRowIndex]}},e.prototype.cancelRow=function(){var t=n.Utils._.clone(this.changingRowIndex);if(!this.options.readOnly){var e=this.editRows[t];hn.New&&!this.isSavingInProgress&&(e.state=hn.Removed,this.clearErrors(t),this.destroyComponents(t),this.inlineEditMode&&this.splice(t),this.editRows.splice(t,1),this.returnPrevPageState()),(hn.Editing||this.isSavingInProgress)&&(e.state=e.prevState,this.inlineEditMode&&(this.dataValue[t]=e.backup),e.data=e.backup,e.backup=null,this.restoreRowContext(e),this.component.rowDrafts||this.clearErrors(t),this.returnPrevPageState()),this.shouldUpdate=!0,this.checkValidity(null,!0),this.redraw(),this.component.rowDrafts&&this.checkValidity(this.data,!1)}},e.prototype.returnPrevPageState=function(){this.isChangingMode=!1,this.isSavingInProgress=!1,this.step=-1,this.changingRowIndex=null,this.toggleChangingMode()},e.prototype.saveValues=function(t){if(!this.options.readOnly&&this.saveEditMode){var e=this.dataValue||[];if(t.state===hn.New&&!this.isSavingInProgress){var i=e.length;e.push(t.data),this.changingRowIndex!==i&&(this.editRows.splice(this.changingRowIndex,1),this.editRows.splice(this.changingRowIndex,0,t))}(t.state===hn.Editing||this.isSavingInProgress)&&(e[this.changingRowIndex]=t.data)}},e.prototype.saveRow=function(t){var e=this,i=this.editRows[this.changingRowIndex];return this.saveValues(i),this.isSavingInProgress&&(this.isSavingInProgress=!1),i.state=this.component.rowDrafts&&!t?hn.Draft:hn.Saved,i.backup=null,this.updateValue(),this.triggerChange(),this.component.rowDrafts&&i.components.forEach((function(t){return t.setPristine(e.pristine)})),this.checkValidity(null,!0),this.redraw(),i.alerts&&(i.alerts=!1),this.isChangingMode=!1,this.changingRowIndex=null,this.shouldUpdate=!0,this.toggleChangingMode(),!0},e.prototype.saveCurrentPageData=function(t){t.state!==hn.New&&t.state!==hn.Editing||(this.saveValues(t),this.isSavingInProgress||(this.isSavingInProgress=!0))},e.prototype.editRow=function(t){var e=this.editRows[t],i=e.state===hn.Editing||e.state===hn.New;if(e&&!i){e.prevState=e.state,e.state=hn.Editing;var r=n.Utils._.cloneDeep(e.data);if(this.inlineEditMode?e.backup=r:(e.backup=e.data,e.data=r,this.restoreRowContext(e)),this.component.modal)return this.addRowModal(t);this.isChangingMode=!0,this.changingRowIndex=t,this.step=0,this.toggleChangingMode()}},e.prototype.removeRow=function(t){this.options.readOnly||(this.baseRemoveRow(t),this.splice(t),this.editRows.splice(t,1),this.updateRowsComponents(t),this.updateValue(),this.triggerChange(),this.checkValidity(null,!0),this.checkData(),this.redraw())},e.prototype.renderRow=function(t,i){var r=this.dataValue||[],s=this.flattenComponents(i),o=n.Utils.Evaluator.noeval?sn.row:n.Utils._.get(this.component,"templates.row",e.defaultRowTemplate);return this.renderString(o,{row:r[i]||{},data:this.data,rowIndex:i,components:this.component.components,flattenedComponents:s,getView:function(t,e){var i=s[t.key],r=i?i.getView(e||i.dataValue):"";return i&&i.widget&&"--- PROTECTED ---"!==r&&(r=n.Utils._.isArray(r)?r.map((function(t){return i.widget.getValueAsString(t)})):i.widget.getValueAsString(r)),r},state:this.editRows[i].state})},e.prototype.hasButton=function(t,e){void 0===e&&(e=this.getNextPage());var i=this.buttonSettings,n=i.previous,r=void 0===n?this.buttonSettings.showPrevious:n,s=i.cancel,o=void 0===s?this.buttonSettings.showCancel:s,a=i.next,l=void 0===a?this.buttonSettings.showNext:a;switch(t){case"previous":return r&&0!==this.step;case"next":return l&&e;case"cancel":return o;default:return!0}},e.prototype.getNextPage=function(){var t;return this.step<(null===(t=this.component)||void 0===t?void 0:t.components.length)},e.prototype.prevPage=function(){var t=this.editRows[this.changingRowIndex];if(0!==this.step){var e=n.Utils._.clone(this.step);this.step=e-1,t.components[this.step]._visible?this.saveCurrentPageData(t):this.prevPage()}else this.root.prevPage()},e.prototype.nextPage=function(){var t,e=this.editRows[this.changingRowIndex],i=this.validateRow(e,!0);if(!this.component.rowDrafts&&!i)return!0;if(this.step===(null===(t=this.component)||void 0===t?void 0:t.components.length)-1)return this.saveRow(i),this.step=-1,-1===this.root.currentNextPage&&this.root.redraw(),!1;var r=n.Utils._.clone(this.step);this.step=r+1,(null==e?void 0:e.components[this.step]._visible)?this.saveCurrentPageData(e):this.nextPage()},e.prototype.validateRow=function(t,e){var i=!0,n=an(this.errors);if(t.state===hn.Editing||e||t.state===hn.Draft&&!this.pristine&&!this.root.pristine){var r=t.components[this.step];r&&(this.component.rowDrafts||r.setPristine(!e),i=i&&r.checkValidity(null,e,t.data))}return this.component.validate&&this.component.validate.row&&("true"!==(i=this.evaluate(this.component.validate.row,{valid:i,row:t.data},"valid",!0)).toString()?(t.error=i,i=!1):t.error=null,null===i&&(i="Invalid row validation for "+this.key)),t.errors=i?null:this.errors.filter((function(t){return!n.includes(t)})),this.showRowErrorAlerts(t,!!i),!!i},e.prototype.toggleChangingMode=function(t){var e;void 0===t&&(t=!1),(null===(e=this.root)||void 0===e?void 0:e.element)&&(t?this.element&&!this.element.classList.contains("dynamicWizard-changingMode")&&(this.root.element.classList.add("dynamicWizard-changingMode"),this.redraw()):(this.root.element.classList.toggle("dynamicWizard-changingMode"),this.redraw(),this.root.redraw()))},e.editForm=en,e}(ln)};var dn={trim:function(t){return n.Utils._.trim(t,"/")},path:function(t){return t.filter((function(t){return!!t})).map(this.trim).join("/")},upload:function(t,e,i,r,s,o,a,l,h){return new n.Formio.Promise((function(n,c){var d=new XMLHttpRequest;d.onerror=function(t){t.networkError=!0,c(t)},d.onabort=c,d.onload=function(){if(d.status>=200&&d.status<300){var t=JSON.parse(d.response),e=new XMLHttpRequest;"function"==typeof a&&(e.upload.onprogress=a),e.onerror=function(t){t.networkError=!0,c(t)},e.onabort=function(t){t.networkError=!0,c(t)},e.onload=function(){e.status>=200&&e.status<300?n(t):c(e.response||"Unable to upload file")},e.onabort=c,e.send(i(e,t))}else c(d.response||"Unable to sign file")},d.open("POST",t.formUrl+"/storage/"+e),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-Type","application/json; charset=UTF-8");var u=t.getToken();u&&d.setRequestHeader("x-jwt-token",u),d.send(JSON.stringify({name:dn.path([o,s]),size:r.size,type:r.type,groupPermissions:l,groupId:h}))}))}};const un=dn,fn=function(){function t(t){this.formio=t}return t.prototype.uploadFile=function(t,e,i,n,r,s,o,a,l){return un.upload(this.formio,"azure",(function(e,i){return e.open("PUT",i.url),e.setRequestHeader("Content-Type",t.type),e.setRequestHeader("x-ms-blob-type","BlockBlob"),t}),t,e,i,n,a,l).then((function(){return{storage:"azure",name:un.path([i,e]),size:t.size,type:t.type,groupPermissions:a,groupId:l}}))},t.prototype.downloadFile=function(t){return this.formio.makeRequest("file",this.formio.formUrl+"/storage/azure?name="+un.trim(t.name),"GET")},t.title="Azure File Services",t}(),pn=function(){function t(t){this.formio=t}return t.prototype.uploadFile=function(t,e,i,r,s,o,a,l,h){var c=this;return new n.Formio.Promise((function(n,s){var o=new XMLHttpRequest;"function"==typeof r&&(o.upload.onprogress=r);var a=new FormData;a.append("name",e),a.append("dir",i),a.append("file",t),o.onerror=function(t){t.networkError=!0,s(t)},o.onload=function(){if(o.status>=200&&o.status<300){var e=JSON.parse(o.response);e.storage="dropbox",e.size=t.size,e.type=t.type,e.groupId=h,e.groupPermissions=l,e.url=e.path_lower,n(e)}else s(o.response||"Unable to upload file")},o.onabort=s,o.open("POST",c.formio.formUrl+"/storage/dropbox");var d=c.formio.getToken();d&&o.setRequestHeader("x-jwt-token",d),o.send(a)}))},t.prototype.downloadFile=function(t){var e=this.formio.getToken();return t.url=this.formio.formUrl+"/storage/dropbox?path_lower="+t.path_lower+(e?"&x-jwt-token="+e:""),n.Formio.Promise.resolve(t)},t.title="Dropbox",t}();var gn,mn=new Uint8Array(16);function vn(){if(!gn&&!(gn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gn(mn)}const yn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,_n=function(t){return"string"==typeof t&&yn.test(t)};for(var bn=[],wn=0;wn<256;++wn)bn.push((wn+256).toString(16).substr(1));const xn=function(t,e,i){var n=(t=t||{}).random||(t.rng||vn)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var r=0;r<16;++r)e[i+r]=n[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(bn[t[e+0]]+bn[t[e+1]]+bn[t[e+2]]+bn[t[e+3]]+"-"+bn[t[e+4]]+bn[t[e+5]]+"-"+bn[t[e+6]]+bn[t[e+7]]+"-"+bn[t[e+8]]+bn[t[e+9]]+"-"+bn[t[e+10]]+bn[t[e+11]]+bn[t[e+12]]+bn[t[e+13]]+bn[t[e+14]]+bn[t[e+15]]).toLowerCase();if(!_n(i))throw TypeError("Stringified UUID is invalid");return i}(n)},kn={storage:{azure:fn,dropbox:pn,indexeddb:function(){function t(t){this.formio=t}return t.prototype.uploadFile=function(t,e,i,r,s,o){var a=this;if("indexedDB"in window)return new n.Formio.Promise((function(t){var e=indexedDB.open(o.indexeddb,3);e.onsuccess=function(e){var i=e.target.result;t(i)},e.onupgradeneeded=function(t){t.target.result.createObjectStore(o.indexeddbTable)}})).then((function(e){var i=new FileReader;return new n.Formio.Promise((function(n,r){i.onload=function(){var i=new Blob([t],{type:t.type}),r=xn(i),a={id:r,data:i,name:t.name,size:t.size,type:t.type,url:s},l=e.transaction([o.indexeddbTable],"readwrite");l.objectStore(o.indexeddbTable).put(a,r).onerror=function(t){console.log("error storing data"),console.error(t)},l.oncomplete=function(){n({storage:"indexeddb",name:t.name,size:t.size,type:t.type,url:s,id:r})}},i.onerror=function(){return r(a)},i.readAsDataURL(t)}))}));console.log("This browser doesn't support IndexedDB")},t.prototype.downloadFile=function(t,e){var i=this;return new n.Formio.Promise((function(t){indexedDB.open(e.indexeddb,3).onsuccess=function(e){var i=e.target.result;t(i)}})).then((function(r){return new n.Formio.Promise((function(n,s){var o=r.transaction([e.indexeddbTable],"readonly"),a=o.objectStore(e.indexeddbTable).get(t.id);a.onsuccess=function(){o.oncomplete=function(){var e=a.result,r=new File([a.result.data],t.name,{type:a.result.type}),o=new FileReader;o.onload=function(t){e.url=t.target.result,n(e)},o.onerror=function(){return s(i)},o.readAsDataURL(r)}},a.onerror=function(){return s(i)}}))}))},t.title="IndexedDB",t}(),s3:function(){function t(t){this.formio=t}return t.prototype.uploadFile=function(t,e,i,n,r,s,o,a,l){return un.upload(this.formio,"s3",(function(n,r){if(r.data.fileName=e,r.data.key=un.path([r.data.key,i,e]),r.signed)return n.open("PUT",r.signed),n.setRequestHeader("Content-Type",t.type),t;for(var s=new FormData,o=0,a=Object.keys(r.data);o<a.length;o++){var l=a[o];s.append(l,r.data[l])}return s.append("file",t),n.open("POST",r.url),s}),t,e,i,n,a,l).then((function(i){return{storage:"s3",name:e,bucket:i.bucket,key:i.data.key,url:un.path([i.url,i.data.key]),acl:i.data.acl,size:t.size,type:t.type}}))},t.prototype.downloadFile=function(t){return"public-read"!==t.acl?this.formio.makeRequest("file",this.formio.formUrl+"/storage/s3?bucket="+un.trim(t.bucket)+"&key="+un.trim(t.key),"GET"):n.Formio.Promise.resolve(t)},t.title="AWS S3",t}()}},Sn={form:i(175).Z},Cn={form:i(352).Z},Rn={form:i(353).Z};var Mn=i(656),On=i(970);const En={sketchpad:Sn,tagpad:Cn,codereader:Rn,dynamicWizard:{form:Mn.Z,html:On.Z}},An={form:i(5).Z},Tn={form:i(432).Z},Pn={form:i(333).Z};var Fn=i(290),In=i(469);const zn={bootstrap:En,bootstrap3:{tagpad:An,sketchpad:Tn,codereader:Pn,dynamicWizard:{form:Fn.Z,html:In.Z}},semantic:{}};var jn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Dn={components:cn,providers:kn,templates:zn,displays:{wizard:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jn(e,t),e.prototype.emitWizardPageSelected=function(t){this.setChangingMode(),this.emit("wizardPageSelected",this.pages[t],t)},e.prototype.emitNextPage=function(){this.setChangingMode(),this.emit("nextPage",{page:this.page,submission:this.submission})},e.prototype.emitPrevPage=function(){this.setChangingMode(),this.emit("prevPage",{page:this.page,submission:this.submission})},e.prototype.hasButton=function(t,e){void 0===e&&(e=this.getNextPage());var i=n.Utils._.get(this.currentPage,"component.buttonSettings",{}),r=i.previous,s=void 0===r?this.options.buttonSettings.showPrevious:r,o=i.cancel,a=void 0===o?this.options.buttonSettings.showCancel:o,l=i.submit,h=void 0===l?this.options.buttonSettings.showSubmit:l,c=i.next,d=void 0===c?this.options.buttonSettings.showNext:c,u=this.hasDynamicWizard(),f=!(null==u?void 0:u.isChangingMode)||this.options.readOnly;switch(t){case"previous":return s&&this.getPreviousPage()>-1&&f;case"next":return d&&null!==e&&-1!==e&&f;case"cancel":return a&&f;case"submit":return h&&!this.options.readOnly&&(null===e||this.page===this.pages.length-1)&&!(null==u?void 0:u.isChangingMode);default:return!0}},e.prototype.setEditMode=function(t){this.valueIsSet||(this.valueIsSet=!0,this.editMode||!t._id||this.options.readOnly||(this.editMode=!0,this.redraw()))},e.prototype.setChangingMode=function(){if(!this.options.readOnly){var t=this.hasDynamicWizard();t&&!this.editMode?(this.emit("setChangingMode"),this.element&&!this.element.classList.contains("dynamicWizard-changingMode")&&(this.element.classList.add("dynamicWizard-changingMode"),this.redraw())):this.element&&((null==t?void 0:t.isChangingMode)&&(t.isChangingMode=!1,this.redraw()),this.element.classList.contains("dynamicWizard-changingMode")&&this.element.classList.remove("dynamicWizard-changingMode"))}},e.prototype.hasDynamicWizard=function(){return this.currentPage.components.find((function(t){return"dynamicWizard"===t.component.type&&t._parentVisible&&t._visible&&!t._disabled}))},e}(n.Displays.displays.wizard)}}},353:(t,e)=>{e.Z=function(t){var e;return'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},656:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||(i+="\n",t.isChangingMode||t.isDisabled?t.isChangingMode&&(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},970:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||(i+="\n",t.isChangingMode||t.isDisabled?t.isChangingMode&&(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},175:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(n){i+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',n.forEach((function(n){i+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=n.key)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'" title="'+(null==(e=n.title)?"":e)+'">\n              <i class="'+(null==(e=n.icon)?"":e)+'"></i>\n              ',n.input&&(i+='\n                <input type="'+(null==(e=n.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=n.input.class)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(n))?"":e)+"/>\n              "),i+="\n            </div>\n          "})),i+="\n        </div>\n      "})),i+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(i+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),i+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(i+='\n        <img ref="backgroundImage" alt=""/>\n      '),i+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},352:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(i+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),i+="\n        ",t.component.imageUrl&&(i+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),i+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(i+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(i+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),i+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(i+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):i+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',i+"\n      </div>\n  </div>\n</div>\n"}},333:(t,e)=>{e.Z=function(t){var e;return'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},290:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||(i+="\n",t.isChangingMode||t.isDisabled?t.isChangingMode&&(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},469:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||(i+="\n",t.isChangingMode||t.isDisabled?t.isChangingMode&&(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},432:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(n){i+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',n.forEach((function(n){i+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=n.key)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'" title="'+(null==(e=n.title)?"":e)+'">\n              <i class="'+(null==(e=n.icon)?"":e)+'"></i>\n              ',n.input&&(i+='\n                <input type="'+(null==(e=n.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=n.input.class)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(n))?"":e)+"/>\n              "),i+="\n            </div>\n          "})),i+="\n        </div>\n      "})),i+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(i+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),i+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(i+='\n        <img ref="backgroundImage" alt=""/>\n      '),i+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},5:(t,e)=>{e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(i+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),i+="\n        ",t.component.imageUrl&&(i+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),i+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(i+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(i+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),i+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(i+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):i+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',i+"\n      </div>\n  </div>\n</div>\n"}},98:e=>{"use strict";e.exports=t}},i={};function n(t){if(i[t])return i[t].exports;var r=i[t]={exports:{}};return e[t](r,r.exports,n),r.exports}return n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(289)})().default}));